webpackJsonp([44],{OtTr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("P9l9");var n={data:function(){return{type:0,username:"",sms:"",password:"",count_down:"获取验证码",count_down2:"",time:60,dx_type:!0,old_password:"",new_password:""}},mounted:function(){this.type=this.$route.query.type},methods:{onClickLeft:function(){this.$router.back(-1)},sure:function(){var e=this,t=this,s={};if(1==t.type){if(!(t.old_password.length>=6&&t.new_password.length>=6))return void t.$toast("登录密码不小于6位哦！");s.old_password=t.old_password,s.new_password=t.new_password,s.phone=t.$store.state.userPhone}else{if(t.username.length<11)return void t.$toats("请填写正确的手机号");if(t.password.length<6)return void t.$toast("登录密码不小于6位哦！");if(0==t.sms.length)return void t.$toast("请填写验证码！");s.phone=t.username,s.new_password=t.password,s.code=t.sms}this.$fetch("user_info_update_pwd",s,t.type).then(function(s){e.$toast("修改成功"),setTimeout(function(){t.$router.push({path:"/"})},1e3)})},fun_count_down:function(){var e=this;if(""==e.username)return alert("手机号不能为空"),!1;if(!/(1[3-9]\d{9}$)/.test(e.username))return alert("请输入正确的手机号"),!1;if(e.dx_type){e.dx_type=!1;var t={};t.user_phone=e.username,e.$fetch("user_code_send",t).then(function(t){e.$toast("验证码已发送"),e.fun_yzm()})}},fun_yzm:function(){this.count_down=this.time,this.count_down2="秒",0===this.time?(this.count_down="获取验证码",this.count_down2="",this.time=60,this.dx_type=!0):(this.count_down=this.time--,setTimeout(this.fun_yzm,1e3))}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"set_show"},[s("div",[s("van-nav-bar",{attrs:{title:"修改密码","left-arrow":""},on:{"click-left":e.onClickLeft}})],1),e._v(" "),1==e.type?s("div",{staticClass:"com"},[s("van-cell-group",[s("van-field",{attrs:{type:"password",label:"旧密码",placeholder:"请输入旧密码"},model:{value:e.old_password,callback:function(t){e.old_password=t},expression:"old_password"}}),e._v(" "),s("van-field",{attrs:{type:"password",label:"新密码",placeholder:"请输入新密码"},model:{value:e.new_password,callback:function(t){e.new_password=t},expression:"new_password"}})],1)],1):e._e(),e._v(" "),2==e.type?s("div",{staticClass:"com"},[s("van-cell-group",[s("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("van-cell-group",[s("van-field",{attrs:{label:"验证码",placeholder:"请输入短信验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}},[s("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.fun_count_down},slot:"button"},[e._v(e._s(e.count_down)+e._s(e.count_down2))])],1)],1),e._v(" "),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1):e._e(),e._v(" "),s("div",{staticClass:"set_but"},[s("button",{on:{click:e.sure}},[e._v("确 定")])])])},staticRenderFns:[]};var a=s("VU/8")(n,o,!1,function(e){s("yAMH")},"data-v-e491ab48",null);t.default=a.exports},yAMH:function(e,t){}});