webpackJsonp([14],{"/x3+":function(t,e){},HqXr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"orderedIndex",mounted:function(){this.getOrdersList()},data:function(){var t=this;return{currentIndex:-1,showModal:!1,total:0,current:0,subscribe_state_map:{PENDING:"待处理",ACTIVE_CANCEL:"用户主动取消",NEGOTIATED_CANCEL:"协商取消",GENERATED_ORDER:"已生成订单"},columns:[{title:"预约分类",key:"cate_name"},{title:"预约手机号码",key:"subscribe_phone"},{title:"提交预约时间",key:"sub_at"},{title:"状态",key:"subscribe_state",render:function(e,r){return e("strong",t.subscribe_state_map[r.row.subscribe_state])}},{title:"操作",key:"order_state_msg",render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:"PENDING"===r.row.subscribe_state?"inline":"none"},on:{click:function(){t.currentIndex=r.index,t.showModal=!0}}},"取消预约"),e("Button",{props:{type:"success",size:"small"},style:{display:"PENDING"===r.row.subscribe_state?"inline":"none"},on:{click:function(){t.$router.push({name:"orderGenerate",query:{id:r.row.id}})}}},"生成订单"),e("Button",{props:{type:"error",size:"small"},style:{display:"PENDING"===r.row.subscribe_state?"none":"inline"},on:{click:function(){t.remove(r.index)}}},"删除")])}}],orderLists:[]}},methods:{getOrdersList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http("user.subscribe.list",{rows:30,page:e}).then(function(e){t.orderLists=e.data,t.total=Number(e.count),t.current=e.append.page.current})},changePage:function(){this.current=page,this.getOrdersList(this.current)},onOk:function(){var t=this;if(this.currentIndex>-1&&this.orderLists[this.currentIndex]){var e=this.orderLists[this.currentIndex].id;this.$http("user.subscribe.cancel-"+e).then(function(){t.orderLists[t.currentIndex].subscribe_state="NEGOTIATED_CANCEL"})}},generatingOrder:function(t){}}},s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{title:"预约管理"}},[r("Table",{attrs:{columns:t.columns,data:t.orderLists,id:"mainTable"}}),t._v(" "),r("div",[r("div",{staticStyle:{margin:"10px 0",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{staticStyle:{height:"20px"},attrs:{size:"small",total:t.total,current:t.current},on:{"on-change":t.changePage}})],1)])])],1),t._v(" "),r("Modal",{attrs:{title:"确认取消"},on:{"on-ok":t.onOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("p",[t._v("请与客户联系后确认取消预约！")])])],1)},staticRenderFns:[]};var i=r("VU/8")(n,s,!1,function(t){r("/x3+")},null,null);e.default=i.exports}});
//# sourceMappingURL=14.2e792ff6f50a1631a56f.js.map