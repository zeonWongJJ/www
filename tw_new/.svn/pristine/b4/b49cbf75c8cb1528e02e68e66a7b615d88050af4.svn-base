{"version":3,"sources":["webpack:///src/view/auth/component/RuleTable/RuleTable.vue","webpack:///./src/view/auth/component/RuleTable/RuleTable.vue?c9bb","webpack:///./src/view/auth/component/RuleTable/RuleTable.vue","webpack:///src/view/auth/ruleIndex.vue","webpack:///./src/view/auth/ruleIndex.vue?d8ff","webpack:///./src/view/auth/ruleIndex.vue"],"names":["columns","label","prop","width","type","template","ownPageColumns","concat","RuleTable","name","components","Treeselect","vue_treeselect_default","a","props","isOwnPage","Boolean","default","watch","showModal","n","this","ruleData","unshift","id","parent_id","shift","mounted","getRuleTree","data","ruleCustom","rule_name","required","message","trigger","rule_controller","rule_action","ruleForm","rule_router_param","rule_enable","rule_level","is_menu","rule_sort","modalTitle","showRowHover","isFold","expandType","methods","_this","$http","data-set","field","then","rs","handleAddSon","parseInt","handlePostRule","_this2","api","$refs","getValue","resetFields","handleUpdate","_this3","keys_default","forEach","key","handleRemoveRule","_this4","$Modal","confirm","title","content","onOk","handleChangeEnable","_this5","catch","e","$Message","info","RuleTable_RuleTable","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-bottom","attrs","size","icon","on","click","$event","_v","_s","_e","ref","sum-text","index-text","selection-type","stripe","border","tree-type","is-fold","expand-type","scopedSlots","_u","fn","scope","on-change","row","model","value","callback","$$v","$set","expression","slot","on-ok","label-width","searchable","multiple","options","placeholder","noChildrenText","staticRenderFns","ruleIndex","__webpack_require__","normalizeComponent","ssrContext","auth_ruleIndex","ruleIndex_Component","ruleIndex_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/6.54a15c20a1a31b0f32b4.js","sourcesContent":["<template>\n  <div style=\"margin-bottom: 10px;\">\n    <Row style=\"margin-bottom: 10px;\">\n      <Button size=\"small\" type=\"success\" icon=\"md-add\" @click=\"showModal = true;modalTitle='添加权限节点';ruleForm.parent_id = 0;delete ruleForm.id\">添加权限节点</Button>\n      <Button size=\"small\" type=\"primary\" v-if=\"isOwnPage\" @click=\"props.isFold = !props.isFold\">{{ props.isFold ? '展开' : '收起' }}</Button>\n    </Row>\n    <zk-table\n      id=\"ruleTreeTable\"\n      ref=\"table\"\n      sum-text=\"sum\"\n      index-text=\"#\"\n      :selection-type=\"!isOwnPage\"\n      :data=\"ruleData\"\n      :columns=\"isOwnPage ? ownPageColumns : columns\"\n      :stripe=\"true\"\n      :border=\"true\"\n      :tree-type=\"true\"\n      :is-fold=\"props.isFold\"\n      :expand-type=\"false\">\n      <template slot=\"rule_enable\" slot-scope=\"scope\">\n        <i-switch v-model=\"scope.row.rule_enable == 1\" @on-change=\"handleChangeEnable(scope.row.id)\">\n          <Icon type=\"md-checkmark\" slot=\"open\"></Icon>\n          <Icon type=\"md-close\" slot=\"close\"></Icon>\n        </i-switch>\n      </template>\n      <template slot=\"rule_api\" slot-scope=\"scope\">\n        <span>{{`${scope.row.rule_controller}/${scope.row.rule_action}/${scope.row.rule_router_param}`}}</span>\n      </template>\n      <template slot=\"_action\" slot-scope=\"scope\">\n        <Button size=\"small\" type=\"default\" @click=\"handleUpdate(scope.row['id'] || 0)\">修改</Button>\n        <Button size=\"small\" type=\"success\" @click=\"handleAddSon(scope.row['id'] || 0)\">添加下级</Button>\n        <Button size=\"small\" type=\"warning\" @click=\"handleRemoveRule(scope.row['id'] || 0)\">删除</Button>\n      </template>\n    </zk-table>\n    <Modal\n      @on-ok=\"handlePostRule\"\n      v-model=\"showModal\"\n      :title=\"modalTitle\">\n        <Form :label-width=\"100\" v-model=\"ruleForm\" ref=\"form\">\n          <FormItem prop=\"parent_id\" label=\"规则所属上级id\">\n            <treeselect :value=\"ruleForm.parent_id || ruleData[0].id\"\n                        :searchable=\"false\"\n                        :multiple=\"false\"\n                        :options=\"ruleData\"\n                        placeholder=\"点击选择上级角色\"\n                        noChildrenText=\"该角色暂无下级\"\n                        ref=\"ruleSelect\"\n                        style=\"width: 300px;\"/>\n          </FormItem>\n          <FormItem prop=\"rule_name\" label=\"规则名称\">\n            <Input v-model=\"ruleForm.rule_name\"></Input>\n          </FormItem>\n          <FormItem prop=\"rule_controller\" label=\"规则所属控制器\">\n            <Input v-model=\"ruleForm.rule_controller\"></Input>\n          </FormItem>\n          <FormItem prop=\"rule_action\" label=\"规则所属方法\">\n            <Input v-model=\"ruleForm.rule_action\"></Input>\n          </FormItem>\n          <FormItem prop=\"rule_router_param\" label=\"规则路由参数\">\n            <Input v-model=\"ruleForm.rule_router_param\"></Input>\n          </FormItem>\n          <FormItem prop=\"rule_enable\" label=\"规则是否开启\">\n            <i-switch v-model=\"ruleForm.rule_enable\" size=\"large\">\n              <span slot=\"open\">开启</span>\n              <span slot=\"close\">关闭</span>\n            </i-switch>\n          </FormItem>\n          <FormItem prop=\"rule_level\" label=\"规则认证等级\">\n            <Select v-model=\"ruleForm.rule_level\">\n              <Option :value=\"1\">只判断是否登录</Option>\n              <Option :value=\"2\">判断登录+权限</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"rule_sort\" label=\"菜单排序\">\n            <Input v-model=\"ruleForm.rule_sort\"></Input>\n            <span>数字越大排序越靠前</span>\n          </FormItem>\n        </Form>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nconst columns = [\n  {\n    label: '菜单名称',\n    prop: 'label',\n    width: 200\n  },\n  {\n    label: '接口路由',\n    type: 'template',\n    template: 'rule_api',\n    width: 160\n  }\n]\nconst ownPageColumns = columns.concat([\n  {\n    label: '鉴权等级',\n    prop: 'rule_level'\n  },\n  {\n    label: '是否开启',\n    type: 'template',\n    template: 'rule_enable'\n  },\n  {\n    label: '排序',\n    prop: 'rule_sort'\n  },\n  {\n    label: '操作',\n    type: 'template',\n    template: '_action',\n    width: 180\n  }\n])\nexport default {\n  name: 'RuleTable',\n  components: {\n    Treeselect\n  },\n  props: {\n    isOwnPage: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    }\n  },\n  watch: {\n    showModal (n) {\n      if (n) {\n        this.ruleData.unshift({\n          label: '==作为最上级==',\n          id: 0,\n          parent_id: 0\n        })\n      } else {\n        if (this.ruleData[0].label === '==作为最上级==') {\n          this.ruleData.shift()\n        }\n      }\n    }\n  },\n  mounted () {\n    this.getRuleTree()\n  },\n  data () {\n    return {\n      ruleCustom: {\n        rule_name: [\n          { required: true, message: '规则名称不能空', trigger: 'blur' }\n        ],\n        rule_controller: [\n          { required: true, message: '规则所属控制器不能空', trigger: 'blur' }\n        ],\n        rule_action: [\n          { required: true, message: '规则所属方法不能空', trigger: 'blur' }\n        ]\n      },\n      ruleForm: {\n        rule_name: '',\n        rule_controller: '',\n        rule_action: '',\n        rule_router_param: '',\n        rule_enable: true,\n        parent_id: 0,\n        rule_level: 1,\n        is_menu: true,\n        rule_sort: 50\n      },\n      showModal: false,\n      modalTitle: '添加权限节点',\n      ruleData: [],\n      columns,\n      ownPageColumns,\n      props: {\n        showRowHover: true,\n        isFold: !this.isOwnPage,\n        expandType: false\n      }\n    }\n  },\n  methods: {\n    getRuleTree () {\n      this.$http('auth.rule.list', {\n        'data-set': 'tree',\n        field: 'rule_name as label, rule_level, rule_enable, rule_sort, rule_controller, rule_action, rule_router_param'\n      }).then(rs => {\n        this.ruleData = rs.data\n      })\n    },\n    handleAddSon (id) {\n      this.ruleForm.parent_id = parseInt(id)\n      this.showModal = true\n      this.modalTitle = '添加子级'\n    },\n    handlePostRule () {\n      let api\n      if (this.ruleForm.id) {\n        api = `auth.rule.update-${this.ruleForm.id}`\n      } else {\n        api = 'auth.rule.add'\n      }\n      this.ruleForm.parent_id = this.$refs['ruleSelect'].getValue()\n      this.$http(api, this.ruleForm).then(() => {\n        this.getRuleTree()\n        this.$refs['form'].resetFields()\n      })\n    },\n    handleUpdate (id) {\n      if (id) {\n        this.$http(`auth.rule.get-${id}`).then(rs => {\n          rs.data['rule_level'] = parseInt(rs.data['rule_level'])\n          rs.data['rule_enable'] = rs.data['rule_enable'] == 1\n          Object.keys(this.ruleForm).forEach(key => {\n            this.ruleForm[key] = rs.data[key] || ''\n          })\n          this.ruleForm['id'] = id\n          this.showModal = true\n          this.modalTitle = '修改规则'\n        })\n      }\n    },\n    handleRemoveRule (id) {\n      if (id) {\n        this.$Modal.confirm({\n          title: '确认删除？',\n          content: '<p>此操作不可逆，确定要删除吗？</p>',\n          onOk: () => {\n            this.$http(`auth.rule.delete-${id}`).then(() => {\n              this.getRuleTree()\n            })\n          }\n        })\n      }\n    },\n    handleChangeEnable (id) {\n      this.$http(`auth.rule.enable-${id}`).then(() => {\n      }).catch(e => {\n        this.$Message.info('操作失败')\n        this.getRuleTree()\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/auth/component/RuleTable/RuleTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('Row',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"icon\":\"md-add\"},on:{\"click\":function($event){_vm.showModal = true;_vm.modalTitle='添加权限节点';_vm.ruleForm.parent_id = 0;delete _vm.ruleForm.id}}},[_vm._v(\"添加权限节点\")]),_vm._v(\" \"),(_vm.isOwnPage)?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.props.isFold = !_vm.props.isFold}}},[_vm._v(_vm._s(_vm.props.isFold ? '展开' : '收起'))]):_vm._e()],1),_vm._v(\" \"),_c('zk-table',{ref:\"table\",attrs:{\"id\":\"ruleTreeTable\",\"sum-text\":\"sum\",\"index-text\":\"#\",\"selection-type\":!_vm.isOwnPage,\"data\":_vm.ruleData,\"columns\":_vm.isOwnPage ? _vm.ownPageColumns : _vm.columns,\"stripe\":true,\"border\":true,\"tree-type\":true,\"is-fold\":_vm.props.isFold,\"expand-type\":false},scopedSlots:_vm._u([{key:\"rule_enable\",fn:function(scope){return [_c('i-switch',{on:{\"on-change\":function($event){_vm.handleChangeEnable(scope.row.id)}},model:{value:(scope.row.rule_enable == 1),callback:function ($$v) {_vm.$set(scope.row, \"rule_enable == 1\", $$v)},expression:\"scope.row.rule_enable == 1\"}},[_c('Icon',{attrs:{\"slot\":\"open\",\"type\":\"md-checkmark\"},slot:\"open\"}),_vm._v(\" \"),_c('Icon',{attrs:{\"slot\":\"close\",\"type\":\"md-close\"},slot:\"close\"})],1)]}},{key:\"rule_api\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(((scope.row.rule_controller) + \"/\" + (scope.row.rule_action) + \"/\" + (scope.row.rule_router_param))))])]}},{key:\"_action\",fn:function(scope){return [_c('Button',{attrs:{\"size\":\"small\",\"type\":\"default\"},on:{\"click\":function($event){_vm.handleUpdate(scope.row['id'] || 0)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){_vm.handleAddSon(scope.row['id'] || 0)}}},[_vm._v(\"添加下级\")]),_vm._v(\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"warning\"},on:{\"click\":function($event){_vm.handleRemoveRule(scope.row['id'] || 0)}}},[_vm._v(\"删除\")])]}}])}),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modalTitle},on:{\"on-ok\":_vm.handlePostRule},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('Form',{ref:\"form\",attrs:{\"label-width\":100},model:{value:(_vm.ruleForm),callback:function ($$v) {_vm.ruleForm=$$v},expression:\"ruleForm\"}},[_c('FormItem',{attrs:{\"prop\":\"parent_id\",\"label\":\"规则所属上级id\"}},[_c('treeselect',{ref:\"ruleSelect\",staticStyle:{\"width\":\"300px\"},attrs:{\"value\":_vm.ruleForm.parent_id || _vm.ruleData[0].id,\"searchable\":false,\"multiple\":false,\"options\":_vm.ruleData,\"placeholder\":\"点击选择上级角色\",\"noChildrenText\":\"该角色暂无下级\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_name\",\"label\":\"规则名称\"}},[_c('Input',{model:{value:(_vm.ruleForm.rule_name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_name\", $$v)},expression:\"ruleForm.rule_name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_controller\",\"label\":\"规则所属控制器\"}},[_c('Input',{model:{value:(_vm.ruleForm.rule_controller),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_controller\", $$v)},expression:\"ruleForm.rule_controller\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_action\",\"label\":\"规则所属方法\"}},[_c('Input',{model:{value:(_vm.ruleForm.rule_action),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_action\", $$v)},expression:\"ruleForm.rule_action\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_router_param\",\"label\":\"规则路由参数\"}},[_c('Input',{model:{value:(_vm.ruleForm.rule_router_param),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_router_param\", $$v)},expression:\"ruleForm.rule_router_param\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_enable\",\"label\":\"规则是否开启\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.ruleForm.rule_enable),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_enable\", $$v)},expression:\"ruleForm.rule_enable\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"开启\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"关闭\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_level\",\"label\":\"规则认证等级\"}},[_c('Select',{model:{value:(_vm.ruleForm.rule_level),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_level\", $$v)},expression:\"ruleForm.rule_level\"}},[_c('Option',{attrs:{\"value\":1}},[_vm._v(\"只判断是否登录\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":2}},[_vm._v(\"判断登录+权限\")])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"rule_sort\",\"label\":\"菜单排序\"}},[_c('Input',{model:{value:(_vm.ruleForm.rule_sort),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"rule_sort\", $$v)},expression:\"ruleForm.rule_sort\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"数字越大排序越靠前\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-caae7586\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/auth/component/RuleTable/RuleTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-caae7586\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RuleTable.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RuleTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RuleTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-caae7586\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RuleTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-caae7586\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/auth/component/RuleTable/RuleTable.vue\n// module id = null\n// module chunks = ","<template>\n  <Card title=\"权限管理\">\n    <rule-table :isOwnPage=\"true\"></rule-table>\n  </Card>\n</template>\n\n<script>\nimport RuleTable from './component/RuleTable'\nexport default {\n  name: 'ruleIndex',\n  components: {\n    RuleTable\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/auth/ruleIndex.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',{attrs:{\"title\":\"权限管理\"}},[_c('rule-table',{attrs:{\"isOwnPage\":true}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-74104286\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/auth/ruleIndex.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-74104286\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ruleIndex.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ruleIndex.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ruleIndex.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-74104286\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ruleIndex.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-74104286\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/auth/ruleIndex.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}