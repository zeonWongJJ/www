webpackJsonp([41],{"7fTl":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=o("P9l9"),e=o("UtaA"),n=(o("oAV5"),o("M6W8")),r={components:{orderConfirmation:o("9qR2").a,headRi:e.a,orderState:n.a},data:function(){return{payShow:!1,rishow:!1,uploadFileUrl:s.a.uploadFileUrl+"/",order_sn:{},isshow:!1,isshow_qx:!1,fgshow:!1,indexs:"",tabs:[{name:"全部",id:1},{name:"待接单",id:2},{name:"待服务",id:3},{name:"已完成",id:4},{name:"已关闭",id:5}],orderData:{},itemshij:(new Date).valueOf()/1e3,num:0,numlist:0,numlist2:0,inishow:!1,ids:"",list_com:[],its_zf:{},order_sign:"",fglist:[{name:"支付宝",imgs:o("K0f0")},{name:"微信",imgs:o("K0f0")},{name:"银行",imgs:o("K0f0")}],user_id:this.$store.getters.user_id,token:""}},mounted:function(){this.token=this.$store.state.token,this.listget(),this.listRend()},methods:{listRend:function(){var t=this,i={rows:500};i.condition={"b.user_id":t.user_id},t.$fetch("user_get_demand",i).then(function(i){t.list_com=i})},listget:function(){},dad:function(t,i){this.ids=t.id,1==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:3==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:this.inishow=!1},onClickLeft:function(){this.$router.back(-1)},onpayShow:function(){this.payShow=!1},onClickRight:function(){this.rishow=!this.rishow},orishow:function(){this.rishow=!1},detailst:function(t,i){this.$router.push({path:"/myfb_details",query:{order_sn:t.order_table_sn}})},tab:function(t){var i=this,s={rows:500};i.num=t;o("mw3O");1==t?(s.condition={"b.order_is_pay":1,"b.order_belong_store_id":0,"b.order_state <>":4,"b.user_id":i.user_id},i.$fetch("user_get_demand",s).then(function(t){i.list_com=t})):2==t?(s.condition={"b.order_state":2,"b.user_id":i.user_id},i.$fetch("user_get_demand",s).then(function(t){i.list_com=t})):3==t?(s.condition={"b.order_state":5,"b.user_id":i.user_id},i.$fetch("user_get_demand",s).then(function(t){i.list_com=t})):4==t?(s.condition={"b.order_state":4,"b.user_id":i.user_id},i.$fetch("user_get_demand",s).then(function(t){i.list_com=t})):i.$fetch("user_get_demand",s).then(function(t){i.list_com=t})},menvaluate:function(t,i){this.$router.push({path:"/menvaluate",query:{order_snx:t.order_table_sn}})},call:function(t){alert(t.order.store_info),t.order.store_info.store_phone?window.location.href="tel:"+t.order.store_info.store_phone:this.$toast("拨号失败！")},confirm:function(){},shows:function(t,i){this.isshow=!0,this.indexs=i,this.order_sn=t},shows_qx:function(t,i){this.isshow_qx=!0,this.indexs=i,this.order_sn=t},spilits:function(){var t=this;t.order_sn.order,t.$fetch("user_cancel_order",{},t.order_sn.order_table_sn).then(function(i){t.$toast("取消成功"),t.isshow=!1,setTimeout(function(){t.listRend()},2e3)})},spilitsx:function(){var t=this;t.order_sn.order,t.$fetch("order_delete",{},t.order_sn.order_table_sn).then(function(i){t.$toast("删除成功"),t.list_com.splice(t.indexs,1),t.isshow_qx=!1,setTimeout(function(){t.listRend()},2e3)})},xbut:function(){this.isshow_qx=!1,this.isshow=!1},ofgshow:function(t,i){this.orderData.order_sn=t.order_table_sn,this.orderData.total=Number(t.demand_remuneration),this.orderData.successUrl="myfb",this.orderData.order_pay_way=t.demand_price_type,this.orderData.order_deductible_type=t.order.payment.order_deductible_type,this.payShow=!0}}},a={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"find"},[1==t.payShow?s("div",{staticClass:"top_box"},[s("van-nav-bar",{attrs:{title:"支付","left-arrow":""},on:{"click-left":t.onpayShow,"click-right":t.onClickRight}},[s("van-icon",{attrs:{slot:"right",name:"wap-nav",color:"white"},slot:"right"})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.rishow,expression:"rishow"}],staticStyle:{position:"fixed","z-index":"9999",top:"0",right:"0",left:"0",bottom:"0",background:"rgba(0,0,0,0)"},on:{touchmove:function(i){i.preventDefault(),t.orishow()},click:function(i){i.stopPropagation(),t.orishow()}}},[s("div",{staticStyle:{position:"absolute","z-index":"9999",top:".45rem",right:"0",width:"1rem",background:"rgba(0,0,0,.2)"}},[s("head-ri")],1)])],1):s("div",{staticClass:"top_box"},[s("van-nav-bar",{attrs:{title:"我的发布","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}},[s("van-icon",{attrs:{slot:"right",name:"wap-nav",color:"white"},slot:"right"})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.rishow,expression:"rishow"}],staticStyle:{position:"fixed","z-index":"9999",top:"0",right:"0",left:"0",bottom:"0",background:"rgba(0,0,0,0)"},on:{touchmove:function(i){i.preventDefault(),t.orishow()},click:function(i){i.stopPropagation(),t.orishow()}}},[s("div",{staticStyle:{position:"absolute","z-index":"9999",top:".45rem",right:"0",width:"1rem",background:"rgba(0,0,0,.2)"}},[s("head-ri")],1)])],1),t._v(" "),s("div",{staticClass:"top_nav"},[s("ul",{staticClass:"top_nav_ul"},t._l(t.tabs,function(i,o){return s("li",{class:{li_style:o==t.num},on:{click:function(i){t.tab(o)}}},[s("div",{staticClass:"top_nav_img",on:{click:function(s){t.dad(i,0==o||2==o)}}},[t._v("\n\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t")])])})),t._v(" "),s("div",{staticClass:"commodity"},[s("ul",t._l(t.list_com,function(i,e){return s("li",{staticClass:"list_coms",on:{click:function(o){t.detailst(i,e)}}},[s("div",{staticClass:"com_com_ri_box"},[s("div",[t._v("订单编号:"+t._s(i.order_table_sn))]),t._v(" "),s("div",[s("order-state",{attrs:{order_info:i.order,is_store_page:!0}})],1)]),t._v(" "),s("div",{staticClass:"com_com"},[s("div",[""==i.demand_img?s("img",{attrs:{src:o("y8yI")}}):s("img",{attrs:{src:t.uploadFileUrl+i.demand_img[0]}})]),t._v(" "),s("div",{staticClass:"com_com_x"},[s("div",{staticClass:"com_com_x_tit"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(i.cat_name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"com_com_x_ov"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(i.demand_address_name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"com_com_x_score"},[s("div",[s("span",[t._v("门牌号：")]),t._v(" "),s("span",[t._v(t._s(i.demand_house_number))])])]),t._v(" "),s("div",{staticClass:"com_com_x_score2"},[s("div",[t._v("\n\t\t\t\t\t\t\t\t\t￥"+t._s(i.demand_remuneration)+"\n\t\t\t\t\t\t\t\t")])])])]),t._v(" "),s("div",{staticClass:"but_coms"},["PAY_SUCCESS"==i.order.order_detail.order_pay_state_dsc?["PENDING_EVALUATE"==i.order.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but3",on:{click:function(o){o.stopPropagation(),t.menvaluate(i,e)}}},[t._v("立即评价")]):t._e(),t._v(" "),i.order.order_detail.order_bis_state_dsc.indexOf(["SET_UP","PENDING_PAY","PENDING_ORDER","PENDING_ASSIGN","PENDING_DOOR"])?s("div",{staticClass:"but_coms_but1",on:{click:function(o){o.stopPropagation(),t.shows(i,e)}}},[t._v("取消订单")]):t._e()]:["PENDING_PAY"==i.order.order_detail.order_pay_state_dsc?s("div",{staticClass:"but_coms_but3",on:{click:function(o){o.stopPropagation(),t.ofgshow(i,e)}}},[t._v("去支付")]):t._e()],t._v(" "),"PENDING_ASSIGN"==i.order.order_detail.order_bis_state_dsc||"PENDING_DOOR"==i.order.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but4",on:{click:function(o){o.stopPropagation(),t.call(i)}}},[t._v("联系商家")]):"COMPLETED"==i.order.order_detail.order_bis_state_dsc||"CLOSED"==i.order.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but1",on:{click:function(o){o.stopPropagation(),t.shows_qx(i,e)}}},[t._v("删除订单")]):t._e()],2)])}))])]),t._v(" "),s("orderConfirmation",{attrs:{orderData:t.orderData,orderType:4},model:{value:t.payShow,callback:function(i){t.payShow=i},expression:"payShow"}}),t._v(" "),t.order_sn.order?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow_qx,expression:"isshow_qx"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbut()}}},[s("div",{staticClass:"po_box_div"},[s("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t确定要删除此订单？\n\t\t\t")]),t._v(" "),s("div",{staticClass:"po_box_but"},[s("div",{on:{click:function(i){i.stopPropagation(),t.xbut()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(i){i.stopPropagation(),t.spilitsx()}}},[t._v("确认")])])])]):t._e(),t._v(" "),t.order_sn.order?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbut()}}},[s("div",{staticClass:"po_box_div"},[s("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t确定要取消此订单？\n\t\t\t")]),t._v(" "),s("div",{staticClass:"po_box_but"},[s("div",{on:{click:function(i){i.stopPropagation(),t.xbut()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(i){i.stopPropagation(),t.spilits()}}},[t._v("确认")])])])]):t._e()],1)},staticRenderFns:[]};var _=o("VU/8")(r,a,!1,function(t){o("VPZp"),o("VYqO")},"data-v-11e8522e",null);i.default=_.exports},VPZp:function(t,i){},VYqO:function(t,i){}});