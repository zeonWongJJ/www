webpackJsonp([4],{EeMj:function(t,e){},"P/Zl":function(t,e){},REeF:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("fZjL"),n=r.n(a),o={name:"OrderSearch",props:{orderTypeMap:{type:Object,default:function(){return{}}},payWayMap:{type:Object,default:function(){return{}}},orderBisStateMap:{type:Object,default:function(){return{SET_UP:"已下单",LOCKING:"已锁定",PENDING_ORDER:"待接单",PENDING_ASSIGN:"待分配",PENDING_DOOR:"待上门",IN_SERVICE:"服务中",PENDING_EVALUATE:"待评价",CLOSED:"已关闭",COMPLETED:"已完成"}}},orderPayStateMap:{type:Object,default:function(){return{PENDING_PAY:"待支付",PAYING:"支付中",PAY_SUCCESS:"付款成功",REFUND_PROCESSING:"退款中",REFUNDED:"已退款"}}}},data:function(){return{}}},i={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{attrs:{"label-width":60}},[r("Row",[r("Col",{attrs:{span:"5"}},[r("ButtonGroup",{staticStyle:{width:"100%"}},[r("Button",{staticStyle:{width:"33%"},attrs:{type:"default"}},[t._v("今天")]),t._v(" "),r("Button",{staticStyle:{width:"33%"},attrs:{type:"default"}},[t._v("昨天")]),t._v(" "),r("Button",{staticStyle:{width:"33%"},attrs:{type:"default"}},[t._v("最近7天")])],1)],1),t._v(" "),r("Col",{attrs:{span:"6"}},[r("Select",{staticStyle:{width:"34%",float:"left","margin-right":"1%"}},[r("Option",{attrs:{value:"beijing"}},[t._v("创建时间")]),t._v(" "),r("Option",{attrs:{value:"shanghai"}},[t._v("支付时间")])],1),t._v(" "),r("DatePicker",{staticStyle:{width:"30%",float:"left","margin-right":"1%"},attrs:{type:"date",placeholder:"开始日期"}}),t._v(" "),r("DatePicker",{staticStyle:{width:"30%",float:"left"},attrs:{type:"date",placeholder:"结束日期"}})],1),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"交易状态"}},[r("Select",t._l(t.orderPayStateMap,function(e,a){return r("Option",{attrs:{value:a}},[t._v(t._s(e))])}))],1)],1),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"业务状态"}},[r("Select",t._l(t.orderBisStateMap,function(e,a){return r("Option",{attrs:{value:a}},[t._v(t._s(e))])}))],1)],1),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"交易性质"}},[r("Select",t._l(t.orderTypeMap,function(e,a){return r("Option",{attrs:{value:a}},[t._v(t._s(e))])}))],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"交易方式"}},[r("Select",t._l(t.payWayMap,function(e,a){return r("Option",{attrs:{value:a}},[t._v(t._s(e))])}))],1)],1),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"下单手机"}},[r("Input",{attrs:{placeholder:"Enter something..."}})],1)],1),t._v(" "),r("Col",{attrs:{span:"4"}},[r("FormItem",{attrs:{label:"快速查询"}},[r("Select",[r("Option",{attrs:{value:"1"}},[t._v("急需跟进")]),t._v(" "),r("Option",{attrs:{value:"0"}},[t._v("进行中")])],1)],1)],1),t._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"流向"}},[r("RadioGroup",[r("Radio",{attrs:{label:"male"}},[t._v("流出")]),t._v(" "),r("Radio",{attrs:{label:"female"}},[t._v("流入")]),t._v(" "),r("Radio",{attrs:{label:"female"}},[t._v("所有")])],1)],1)],1)],1)],1),t._v(" "),r("Button",{attrs:{type:"primary",icon:"ios-search"}},[t._v("搜索")])],1)},staticRenderFns:[]};var l=r("VU/8")(o,i,!1,function(t){r("nObU")},"data-v-6113ade9",null).exports,s={name:"TableTools",props:{pageTotal:{type:Number,default:function(){return 0}},pageCurrent:{type:String,default:function(){return 0}}},methods:{changePage:function(t){this.$emit("on-change-page",t)}}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{attrs:{model:t.formItem,"label-width":100}},[r("FormItem",{attrs:{label:"技能星级"}},[r("Rate",{attrs:{disabled:!1},model:{value:t.formItem.skill_star,callback:function(e){t.$set(t.formItem,"skill_star",e)},expression:"formItem.skill_star"}})],1),t._v(" "),r("FormItem",{attrs:{label:"服务态度星级"}},[r("Rate",{attrs:{disabled:!1},model:{value:t.formItem.attitude_star,callback:function(e){t.$set(t.formItem,"attitude_star",e)},expression:"formItem.attitude_star"}})],1),t._v(" "),r("FormItem",{attrs:{label:"时间效率星级"}},[r("Rate",{attrs:{disabled:!1},model:{value:t.formItem.time_efficiency_star,callback:function(e){t.$set(t.formItem,"time_efficiency_star",e)},expression:"formItem.time_efficiency_star"}})],1),t._v(" "),r("FormItem",{attrs:{label:"评价类型"}},[t._v("\n      "+t._s(t.formItem.comment_type_star)+"\n    ")]),t._v(" "),r("FormItem",{attrs:{label:"评论内容"}},[r("Input",{attrs:{type:"textarea"},model:{value:t.formItem.comment_content,callback:function(e){t.$set(t.formItem,"comment_content",e)},expression:"formItem.comment_content"}})],1)],1)],1)},staticRenderFns:[]};var u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Table",{attrs:{columns:this.columns,data:this.data}})],1)},staticRenderFns:[]};var m={name:"order_list",components:{OrderSearch:l,TableTools:r("VU/8")(s,d,!1,function(t){r("RNc9")},"data-v-47724c78",null).exports,CommentItem:r("VU/8")({name:"CommentItem",computed:{formItem:function(){return this.$store.state.order.comment||{}}}},c,!1,function(t){r("ugfZ")},"data-v-45d544fc",null).exports,OrderActions:r("VU/8")({name:"OrderTrack",computed:{orderSN:function(){return this.$store.state.order.orderSN||""}},watch:{orderSN:function(t){t&&this.getOrderActions(t)}},data:function(){return{data:[],columns:[{title:"时间",key:"log_at"},{title:"订单动作",key:"log"}]}},methods:{getOrderActions:function(t){var e=this,r=t||this.orderSN;this.$http("order.get.actions-"+r).then(function(t){e.data=t.data})}}},u,!1,function(t){r("EeMj")},"data-v-7f235b0a",null).exports},mounted:function(){this.getOrderList()},data:function(){var t=this;return{btnLoading:!1,toggleActionsModal:!1,toggleCommentModal:!1,orderTypeMap:{1:"服务",2:"需求",3:"充值"},payWayMap:{alipay:"支付宝",wechat:"微信",bankcard:"银联支付"},orderBisStateMap:{SET_UP:"已下单",LOCKING:"已锁定",PENDING_ORDER:"待接单",PENDING_ASSIGN:"待分配",PENDING_DOOR:"待上门",IN_SERVICE:"服务中",PENDING_EVALUATE:"待评价",CLOSED:"已关闭",COMPLETED:"已完成"},orderPayStateMap:{PENDING_PAY:"待支付",PAYING:"支付中",PAY_SUCCESS:"付款成功",REFUND_PROCESSING:"退款中",REFUNDED:"已退款"},orderColumns:[{width:35,type:"selection"},{title:"流水号",width:160,render:function(t,e){return t("span",e.row.order_detail.order_sn)}},{title:"交易状态",render:function(e,r){return e("span",t.orderPayStateMap[r.row.order_detail.order_pay_state_dsc]||r.row.order_detail.order_pay_state_dsc)}},{title:"业务状态",render:function(e,r){return e("span",t.orderBisStateMap[r.row.order_detail.order_bis_state_dsc]||r.row.order_detail.order_bis_state_dsc)}},{title:"性质",render:function(e,r){return e("span",t.orderTypeMap[r.row.store_info.order_type]||"未知")}},{title:"下单手机号",className:"non-padding",render:function(t,e){return t("span",e.row.server_info.telephone)}},{title:"下单时间",className:"non-padding",render:function(t,e){return t("span",e.row.time_record.add_time)}},{title:"小计/元",render:function(t,e){return t("span",e.row.payment.order_amount)}},{title:"实际支付/元",render:function(t,e){return t("span",e.row.payment.order_actual_amount)}},{title:"操作",key:"_action",render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small",disabled:t.btnLoading},style:{marginRight:"5px",padding:"0 5px",height:"20px"},on:{click:function(){t.btnLoading=!0,t.$store.commit("SET_ORDER_SN",r.row.order_detail.order_sn),t.toggleActionsModal=!0,t.btnLoading=!1}}},"追踪"),e("Button",{props:{type:"primary",size:"small",disabled:t.btnLoading},style:{padding:"0 5px",height:"20px"},on:{click:function(){t.btnLoading=!0,t.$store.commit("SET_ORDER_SN",r.row.order_detail.order_sn),t.$http("order.get.comment-"+r.row.order_detail.order_sn).then(function(e){t.$store.commit("SET_ORDER_SN",0),n()(e.data).length?(t.$store.commit("SET_COMMENT",e.data),t.toggleCommentModal=!0,t.btnLoading=!1):(t.$Message.info("暂无评论"),t.btnLoading=!1)}).catch(function(){t.$store.commit("SET_ORDER_SN",0)})}}},"评价")])}}],orderData:[],total:0,current:0}},methods:{getOrderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http("order.list",{rows:30,page:e}).then(function(e){t.orderData=e.data,t.total=Number(e.count),t.current=e.append.page.current})},changePage:function(t){this.getOrderList(t)}}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-film-outline"}}),t._v("\n      订单查询\n    ")],1),t._v(" "),r("Button",{attrs:{slot:"extra",type:"success",size:"small",icon:"md-download"},slot:"extra"},[t._v("导出excel")]),t._v(" "),r("order-search",{attrs:{orderTypeMap:t.orderTypeMap,payWayMap:t.payWayMap}})],1),t._v(" "),r("div",{staticStyle:{"margin-top":"10px"}}),t._v(" "),r("Table",{attrs:{stripe:!0,size:"small",border:"",columns:t.orderColumns,data:t.orderData,id:"mainTable"}}),t._v(" "),r("div",{staticStyle:{margin:"10px 0",overflow:"hidden"}},[r("ButtonGroup",{staticStyle:{float:"left"}},[r("Button",{attrs:{type:"default"}},[t._v("标记已处理")]),t._v(" "),r("Button",{attrs:{type:"default"}},[t._v("拨打客户手机")])],1),t._v(" "),r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{size:"small",total:t.total,current:t.current,"page-size":30},on:{"on-change":t.changePage}})],1)],1),t._v(" "),r("Modal",{attrs:{title:"查看评论"},model:{value:t.toggleCommentModal,callback:function(e){t.toggleCommentModal=e},expression:"toggleCommentModal"}},[r("comment-item",{on:{"on-hide":function(e){t.toggleCommentModal=!1}}})],1),t._v(" "),r("Modal",{attrs:{"mask-closable":!1,width:"80",title:"查看订单动作记录"},model:{value:t.toggleActionsModal,callback:function(e){t.toggleActionsModal=e},expression:"toggleActionsModal"}},[r("order-actions"),t._v(" "),r("p",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]};var p=r("VU/8")(m,_,!1,function(t){r("P/Zl")},null,null);e.default=p.exports},RNc9:function(t,e){},nObU:function(t,e){},ugfZ:function(t,e){}});
//# sourceMappingURL=4.d1fc0e3cd995c1f52c3a.js.map