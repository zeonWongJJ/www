webpackJsonp([56],{ICqJ:function(e,t){},c5iy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("P9l9"),n("Fd2+");var o={data:function(){return{type:0,phone:"",username:"",sms:"",password:"",count_down:"获取验证码",count_down2:"",time:60,dx_type:!0,old_payment:"",new_payment:"",user:{phone:""}}},mounted:function(){var e=this;this.init(),this.type=this.$route.query.type,window.onSMSReceiveSuccess=function(t){e.sms=t.code}},watch:{},methods:{onClickLeft:function(){this.$router.back(-1)},init:function(){var e=this;e.$fetch("user_info_get",{},"","GET",1).then(function(t){e.phone=t.user_phone;var n=t.user_phone,o=n.substr(0,3)+"****"+n.substr(7);e.user.phone=o})},sure:function(){var e=this,t={};if(1==e.type){if(!(e.old_payment.length>=6&&e.new_payment.length>=6))return void e.$toast("登录密码不小于6位哦！");t.old_payment=e.old_payment,t.new_payment=e.new_payment,t.user_phone=e.phone}else if(2==e.type){if(11!==e.phone.length||11!==e.user.phone.length)return void e.$toast("请填写正确的手机号");if(e.password.length<6)return void e.$toast("登录密码不小于6位哦！");if(4!=e.sms.length)return void e.$toast("验证码不合法！");t.phone=e.phone,t.new_payment=e.password,t.code=e.sms}else{if(e.old_payment!==e.new_payment)return void e.$toast("两个密码不一致，请重新检查！");t.payment_code=e.old_payment,e.$fetch("userpayment_init",t,"","POST",0).then(function(t){e.$toast("修改成功"),setTimeout(function(){e.$router.push({path:"/member"})},1e3)})}e.$fetch("user_info_update_payment",t,e.type,"POST",0).then(function(t){e.$toast("修改成功"),setTimeout(function(){e.$router.push({path:"/member"})},1e3)})},fun_count_down:function(){var e=this;if(e.dx_type){e.dx_type=!1;var t={};t.user_phone=e.phone,e.$fetch("user_code_send",t).then(function(t){e.$toast("验证码已发送"),e.fun_yzm()})}},fun_yzm:function(){this.count_down=this.time,this.count_down2="秒",0===this.time?(this.count_down="获取验证码",this.count_down2="",this.time=60,this.dx_type=!0):(this.count_down=this.time--,setTimeout(this.fun_yzm,1e3))}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"set_show"},[n("div",[n("van-nav-bar",{attrs:{title:"修改支付密码","left-arrow":""},on:{"click-left":e.onClickLeft}})],1),e._v(" "),1==e.type?n("div",{staticClass:"com"},[n("van-cell-group",[n("van-field",{attrs:{type:"password",label:"旧密码",placeholder:"请输入旧密码"},model:{value:e.old_payment,callback:function(t){e.old_payment=t},expression:"old_payment"}}),e._v(" "),n("van-field",{attrs:{type:"password",label:"新密码",placeholder:"请输入新密码"},model:{value:e.new_payment,callback:function(t){e.new_payment=t},expression:"new_payment"}})],1)],1):e._e(),e._v(" "),2==e.type?n("div",{staticClass:"com"},[n("van-cell-group",[n("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),e._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:"验证码",placeholder:"请输入短信验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.fun_count_down},slot:"button"},[e._v(e._s(e.count_down)+e._s(e.count_down2))])],1)],1),e._v(" "),n("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1):e._e(),e._v(" "),3==e.type?n("div",{staticClass:"com"},[n("van-cell-group",[n("van-field",{attrs:{type:"password",label:"新密码",placeholder:"请设置支付密码"},model:{value:e.old_payment,callback:function(t){e.old_payment=t},expression:"old_payment"}}),e._v(" "),n("van-field",{attrs:{type:"password",label:"重复密码",placeholder:"请再次输入支付密码"},model:{value:e.new_payment,callback:function(t){e.new_payment=t},expression:"new_payment"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"set_but"},[n("button",{on:{click:e.sure}},[e._v("确 定")])])])},staticRenderFns:[]};var a=n("VU/8")(o,s,!1,function(e){n("ICqJ")},"data-v-544c2a22",null);t.default=a.exports}});