{"version":3,"sources":["webpack:///./src/view/auth/component/AuthTreeCheckBox.vue?b10f","webpack:///./src/view/auth/component/AuthTreeCheckBox.vue","webpack:///src/view/auth/component/AuthTreeCheckBox.vue","webpack:///src/view/auth/index.vue","webpack:///./src/view/auth/index.vue?d2a2","webpack:///./src/view/auth/index.vue"],"names":["component_AuthTreeCheckBox","render","_h","this","$createElement","_c","_self","ref","attrs","data","authList","show-checkbox","staticRenderFns","auth_component_AuthTreeCheckBox","__webpack_require__","normalizeComponent","name","computed","roleId","$store","state","auth","watch","n","o","_this","$http","then","rs","ssrContext","components","Treeselect","vue_treeselect_default","a","AuthTreeCheckBox","mounted","getRoleData","ruleForm","id","parent_id","role_name","role_info","role_status","loading","modalTitle","showModal","showCheckBoxModal","roleData","columns","label","prop","type","template","width","buttonProps","size","methods","data-set","field","checkRoleHasTopper","ok","_this2","arguments","length","undefined","unshift","updateRow","_this3","keys_default","forEach","key","addSon","parentId","_this4","parseInt","handleRemoveRole","_this5","catch","err","e","$Message","warning","handleAllowRule","_selectedNodes","$refs","getCheckedAndIndeterminateNodes","node","push","assign_ids","commit","view_auth","_vm","title","staticStyle","margin-bottom","icon","on","click","$event","_v","sum-text","index-text","selection-type","stripe","border","tree-type","is-fold","expand-type","scopedSlots","_u","fn","scope","row","disabled","nativeOn","_e","mask-closable","on-ok","model","value","callback","$$v","expression","label-width","searchable","multiple","options","placeholder","noChildrenText","$set","autosize","minRows","maxRows","slot","height","auth_Component","auth_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.775505576def67481f3a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('Tree',{ref:\"tree\",attrs:{\"data\":_vm.authList,\"show-checkbox\":\"\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-acd27176\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/auth/component/AuthTreeCheckBox.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acd27176\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AuthTreeCheckBox.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AuthTreeCheckBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AuthTreeCheckBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-acd27176\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AuthTreeCheckBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-acd27176\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/auth/component/AuthTreeCheckBox.vue\n// module id = null\n// module chunks = ","<template>\n  <section>\n    <Tree :data=\"authList\" show-checkbox ref=\"tree\"></Tree>\n  </section>\n</template>\n\n<script>\nexport default {\n  name: 'AuthTreeCheckBox',\n  computed: {\n    roleId () {\n      return this.$store.state.auth.roleId || 0\n    }\n  },\n  data () {\n    return {\n      authList: []\n    }\n  },\n  watch: {\n    roleId (n, o) {\n      if (n) {\n        this.$http(`auth.role.assigned-${n}`).then(rs => {\n          this.authList = rs.data\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.block {\n  display: block;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/auth/component/AuthTreeCheckBox.vue","<template>\n  <div>\n    <Card title=\"角色列表\">\n      <Button size=\"small\" type=\"primary\" icon=\"md-add\" style=\"margin-bottom: 10px;\" @click=\"showModal = true; modalTitle = '添加角色'\">添加角色</Button>\n      <zk-table\n        id=\"roleTreeTable\"\n        ref=\"table\"\n        sum-text=\"sum\"\n        index-text=\"#\"\n        :selection-type=\"false\"\n        :data=\"roleData\"\n        :columns=\"columns\"\n        :stripe=\"true\"\n        :border=\"true\"\n        :tree-type=\"true\"\n        :is-fold=\"true\"\n        :expand-type=\"false\">\n        <template slot=\"_action\" slot-scope=\"scope\">\n          <Button :disabled=\"loading\" v-if=\"scope.row.id\" size=\"small\" type=\"default\" @click.native=\"updateRow(scope.row.id)\">修改信息</Button>\n          <Button :disabled=\"loading\" v-if=\"scope.row.id\" size=\"small\" type=\"default\" @click.native=\"handleAllowRule(scope.row.id)\">权限分配</Button>\n          <Button :disabled=\"loading\" v-if=\"scope.row.id\" size=\"small\" type=\"success\" @click.native=\"addSon(scope.row['id'] || 0)\">添加下级</Button>\n          <Button :disabled=\"loading\" v-if=\"scope.row.id\" size=\"small\" type=\"warning\" @click.native=\"handleRemoveRole(scope.row['id'] || 0)\">删除</Button>\n        </template>\n      </zk-table>\n    </Card>\n    <Modal\n      :mask-closable=\"false\"\n      v-model=\"showModal\"\n      :title=\"modalTitle\"\n      @on-ok=\"ok\">\n        <Form ref=\"formInline\" :model=\"ruleForm\" :label-width=\"80\">\n          <FormItem prop=\"role_name\" label=\"所属上级\">\n            <treeselect :value=\"ruleForm.parent_id || roleData[0].id\"\n                        :searchable=\"false\"\n                        :multiple=\"false\"\n                        :options=\"roleData\"\n                        placeholder=\"点击选择上级角色\"\n                        noChildrenText=\"该角色暂无下级\"\n                        ref=\"roleSelect\"\n                        style=\"width: 300px;\"/>\n          </FormItem>\n          <FormItem prop=\"role_name\" label=\"角色名称\">\n            <Input type=\"text\" v-model=\"ruleForm.role_name\" placeholder=\"角色名称\"></Input>\n          </FormItem>\n          <FormItem prop=\"role_name\" label=\"角色描述\">\n            <Input v-model=\"ruleForm.role_info\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" placeholder=\"角色描述\"></Input>\n          </FormItem>\n          <FormItem label=\"角色组状态\">\n            <i-switch v-model=\"ruleForm.role_status\" size=\"large\">\n              <span slot=\"open\">开启</span>\n              <span slot=\"close\">关闭</span>\n            </i-switch>\n          </FormItem>\n        </Form>\n    </Modal>\n    <Modal\n      v-model=\"showCheckBoxModal\"\n      title=\"分配权限\"\n      style=\"height: 800px;\"\n      @on-ok=\"handleAllowRule($store.state.auth.roleId, true)\">\n      <auth-tree-check-box ref=\"authTreeCheckBox\"></auth-tree-check-box>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport AuthTreeCheckBox from './component/AuthTreeCheckBox'\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nexport default {\n  name: 'authIndex',\n  components: {\n    Treeselect,\n    AuthTreeCheckBox\n  },\n  mounted() {\n    this.getRoleData()\n  },\n  data() {\n    return {\n      ruleForm: {\n        id: 0,\n        parent_id: 0,\n        role_name: '',\n        role_info: '',\n        role_status: true\n      },\n      loading: false,\n      modalTitle: '新增角色',\n      showModal: false,\n      showCheckBoxModal: false,\n      roleData: [],\n      columns: [\n        {\n          label: '角色名称',\n          prop: 'label'\n        },\n        {\n          label: '操作',\n          type: 'template',\n          template: '_action',\n          width: 300\n        }\n      ],\n      buttonProps: {\n        size: 'small'\n      }\n    }\n  },\n  methods: {\n    getRoleData () {\n      this.$http('auth.role.list', {\n        'data-set': 'tree',\n        'field': 'role_name as label'\n      }).then(rs => {\n        this.roleData = rs.data\n        this.checkRoleHasTopper()\n      })\n    },\n    ok (roleId = 0) {\n      delete this.ruleForm.id\n      if (roleId) {\n        this.$http('auth.role.add', this.ruleForm).then(() => {\n          this.getRoleData()\n        })\n      } else {\n        this.$http(`auth.role.update-${roleId}`, this.ruleForm).then(() => {\n          this.getRoleData()\n        })\n      }\n    },\n    checkRoleHasTopper () {\n      if (this.roleData[0].label !== '==最顶级角色==') {\n        this.roleData.unshift({\n          id: 0,\n          label: '==最顶级角色==',\n          parent_id: 0,\n        })\n      }\n    },\n    /**\n     * 更新角色\n     * @param roleId 角色id\n     */\n    updateRow (roleId) {\n      if (roleId) {\n        this.loading = true\n        this.modalTitle = '修改角色'\n        this.checkRoleHasTopper()\n        this.$http(`auth.role.get-${roleId}`).then(rs => {\n          if (rs.data) {\n            rs.data['role_status'] = rs.data['role_status'] === '1'\n          }\n          Object.keys(this.ruleForm).forEach(key => {\n            this.ruleForm[key] = rs.data[key] || ''\n          })\n          this.loading = false\n          this.showModal = true\n        })\n      }\n      this.loading = false\n    },\n    addSon (parentId) {\n      this.loading = true\n      this.modalTitle = '添加下级角色'\n      this.checkRoleHasTopper()\n      Object.keys(this.ruleForm).forEach(key => {\n        if (key === 'parent_id') {\n          this.ruleForm[key] = parseInt(parentId)\n        } else {\n          this.ruleForm[key] = ''\n        }\n      })\n      this.loading = false\n      this.showModal = true\n    },\n    /**\n     * 执行删除角色\n     * @param id\n     */\n    handleRemoveRole (id) {\n      if (id) {\n        this.loading = true\n        this.$http(`auth.role.delete-${id}`).then(() => {\n          this.getRoleData()\n          this.loading = false\n        }).catch(err => {\n          this.loading = false\n          err.forEach(e => {\n            this.$Message.warning(e)\n          })\n        })\n      }\n    },\n    handleAllowRule (id, isPost = false) {\n      if (isPost) {\n        let _selectedNodes = []\n        const selectedNodes = this.$refs['authTreeCheckBox'].$refs['tree'].getCheckedAndIndeterminateNodes()\n        selectedNodes.forEach(node => {\n          _selectedNodes.push(parseInt(node.id))\n        })\n        this.$http(`auth.role.assign-${id}`, {\n          assign_ids: _selectedNodes\n        }).then(rs => {\n\n        })\n      } else {\n        this.$store.commit('SET_ROLE_ID', 0)\n        this.$store.commit('SET_ROLE_ID', id)\n        this.showCheckBoxModal = true\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import \"./index.less\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/auth/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Card',{attrs:{\"title\":\"角色列表\"}},[_c('Button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"md-add\"},on:{\"click\":function($event){_vm.showModal = true; _vm.modalTitle = '添加角色'}}},[_vm._v(\"添加角色\")]),_vm._v(\" \"),_c('zk-table',{ref:\"table\",attrs:{\"id\":\"roleTreeTable\",\"sum-text\":\"sum\",\"index-text\":\"#\",\"selection-type\":false,\"data\":_vm.roleData,\"columns\":_vm.columns,\"stripe\":true,\"border\":true,\"tree-type\":true,\"is-fold\":true,\"expand-type\":false},scopedSlots:_vm._u([{key:\"_action\",fn:function(scope){return [(scope.row.id)?_c('Button',{attrs:{\"disabled\":_vm.loading,\"size\":\"small\",\"type\":\"default\"},nativeOn:{\"click\":function($event){_vm.updateRow(scope.row.id)}}},[_vm._v(\"修改信息\")]):_vm._e(),_vm._v(\" \"),(scope.row.id)?_c('Button',{attrs:{\"disabled\":_vm.loading,\"size\":\"small\",\"type\":\"default\"},nativeOn:{\"click\":function($event){_vm.handleAllowRule(scope.row.id)}}},[_vm._v(\"权限分配\")]):_vm._e(),_vm._v(\" \"),(scope.row.id)?_c('Button',{attrs:{\"disabled\":_vm.loading,\"size\":\"small\",\"type\":\"success\"},nativeOn:{\"click\":function($event){_vm.addSon(scope.row['id'] || 0)}}},[_vm._v(\"添加下级\")]):_vm._e(),_vm._v(\" \"),(scope.row.id)?_c('Button',{attrs:{\"disabled\":_vm.loading,\"size\":\"small\",\"type\":\"warning\"},nativeOn:{\"click\":function($event){_vm.handleRemoveRole(scope.row['id'] || 0)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"title\":_vm.modalTitle},on:{\"on-ok\":_vm.ok},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.ruleForm,\"label-width\":80}},[_c('FormItem',{attrs:{\"prop\":\"role_name\",\"label\":\"所属上级\"}},[_c('treeselect',{ref:\"roleSelect\",staticStyle:{\"width\":\"300px\"},attrs:{\"value\":_vm.ruleForm.parent_id || _vm.roleData[0].id,\"searchable\":false,\"multiple\":false,\"options\":_vm.roleData,\"placeholder\":\"点击选择上级角色\",\"noChildrenText\":\"该角色暂无下级\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"role_name\",\"label\":\"角色名称\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"角色名称\"},model:{value:(_vm.ruleForm.role_name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"role_name\", $$v)},expression:\"ruleForm.role_name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"role_name\",\"label\":\"角色描述\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"placeholder\":\"角色描述\"},model:{value:(_vm.ruleForm.role_info),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"role_info\", $$v)},expression:\"ruleForm.role_info\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"角色组状态\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.ruleForm.role_status),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"role_status\", $$v)},expression:\"ruleForm.role_status\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"开启\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"关闭\")])])],1)],1)],1),_vm._v(\" \"),_c('Modal',{staticStyle:{\"height\":\"800px\"},attrs:{\"title\":\"分配权限\"},on:{\"on-ok\":function($event){_vm.handleAllowRule(_vm.$store.state.auth.roleId, true)}},model:{value:(_vm.showCheckBoxModal),callback:function ($$v) {_vm.showCheckBoxModal=$$v},expression:\"showCheckBoxModal\"}},[_c('auth-tree-check-box',{ref:\"authTreeCheckBox\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c0093c6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/auth/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c0093c6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"options\\\":{\\\"javascriptEnabled\\\":true},\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c0093c6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c0093c6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/auth/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}