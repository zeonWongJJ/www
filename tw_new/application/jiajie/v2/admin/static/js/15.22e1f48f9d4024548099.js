webpackJsonp([15],{rFIW:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=a("fZjL"),i=a.n(t),o={name:"adminList",data:function(){var e=this;return{showModal:!1,modalTitle:"新增管理员",data:[],page:1,adminForm:{user_nicename:"",user_name:"",user_phone:"",user_email:"",is_enable:!0},watch:{showModal:function(e){e||this.$refs.form.resetFields()}},columns:[{title:"管理员姓名",key:"user_nicename"},{title:"管理员用户名",key:"user_name"},{title:"管理员手机号码",key:"user_phone"},{title:"管理员是否开启",key:"is_enable",render:function(n,a){return n("i-switch",{props:{value:1==a.row.is_enable},on:{"on-change":function(){e.$http("admin.enable-"+a.row.user_id).catch(function(n){e.$Message.info("切换失败"),e.getAdminList()})}}})}},{title:"操作",key:"_action",render:function(n,a){return n("div",[n("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$http("admin.get-"+a.row.user_id).then(function(n){e.adminForm.is_enable=1==n.data.is_enable,n.data.user_sex=parseInt(n.data),i()(e.adminForm).forEach(function(a){e.adminForm[a]=n.data[a]||""}),e.adminForm.id=a.row.user_id,e.modalTitle="修改管理员",e.showModal=!0})}}},"修改"),n("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$Modal.confirm({title:"确认删除",content:"<p>该操作不可逆，请确认删除</p>",onOk:function(){e.handleRemoveAdmin(a.row.user_id,a.index)}})}}},"删除")])}}]}},mounted:function(){this.getAdminList()},methods:{handlePostAdmin:function(){var e=this,n=void 0;n=this.adminForm.id?"admin.update-"+this.adminForm.id:"admin.add",this.$http(n,this.adminForm).then(function(n){e.getAdminList(e.page),e.$refs.form.resetFields()})},getAdminList:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http("admin.list",{rows:30,page:n}).then(function(n){e.data=n.data})},handleRemoveAdmin:function(e,n){var a=this;this.$http("admin.delete-"+e).then(function(){a.data.splice(n,1)})}}},r={render:function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("Card",{attrs:{title:"管理员列表"}},[a("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.showModal=!0,e.modalTitle="新增管理员",delete e.adminForm.id}}},[e._v("新增管理员")]),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.data}}),e._v(" "),a("Modal",{attrs:{title:e.modalTitle},on:{"on-ok":e.handlePostAdmin},model:{value:e.showModal,callback:function(n){e.showModal=n},expression:"showModal"}},[a("Form",{ref:"form",attrs:{"label-width":100},model:{value:e.adminForm,callback:function(n){e.adminForm=n},expression:"adminForm"}},[a("FormItem",{attrs:{prop:"user_nicename",label:"管理员姓名"}},[a("Input",{model:{value:e.adminForm.user_nicename,callback:function(n){e.$set(e.adminForm,"user_nicename",n)},expression:"adminForm.user_nicename"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"user_name",label:"管理员用户名"}},[a("Input",{model:{value:e.adminForm.user_name,callback:function(n){e.$set(e.adminForm,"user_name",n)},expression:"adminForm.user_name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"user_phone",label:"管理员手机号码"}},[a("Input",{model:{value:e.adminForm.user_phone,callback:function(n){e.$set(e.adminForm,"user_phone",n)},expression:"adminForm.user_phone"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"user_email",label:"管理员邮箱地址"}},[a("Input",{model:{value:e.adminForm.user_email,callback:function(n){e.$set(e.adminForm,"user_email",n)},expression:"adminForm.user_email"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"user_sex",label:"管理员性别"}},[a("RadioGroup",{model:{value:e.adminForm.user_sex,callback:function(n){e.$set(e.adminForm,"user_sex",n)},expression:"adminForm.user_sex"}},[a("Radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"user_password",label:"管理员登录密码"}},[a("Input",{model:{value:e.adminForm.user_password,callback:function(n){e.$set(e.adminForm,"user_password",n)},expression:"adminForm.user_password"}}),e._v(" "),a("span",[e._v("留空则为不修改")])],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,r,!1,function(e){a("w6K6")},"data-v-2cbdb57d",null);n.default=s.exports},w6K6:function(e,n){}});
//# sourceMappingURL=15.22e1f48f9d4024548099.js.map