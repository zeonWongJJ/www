webpackJsonp([51],{Xto0:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("P9l9"),e={data:function(){return{list:[],page:1,end:!1,count:0,imgs:s("y8yI"),uploadFileUrl:n.a.uploadFileUrl+"/"}},mounted:function(){this.init()},methods:{onClickLeft:function(){this.$store.commit("store_show",!1),this.$router.push("/member")},onClickRight:function(){},init:function(){var t=this,i={page:t.page};t.$fetch("store_clerk_list",i).then(function(i){t.page++,t.list=i,10!=i.length?(t.$refs.scroller.finishInfinite(!0),t.end=!0):t.$refs.scroller.finishInfinite(!1),t.firstFinish=!0}).catch(function(i){t.firstFinish=!0}).catch(function(i){t.$refs.scroller.finishInfinite(!1)})},infinite:function(t){var i=this;if(i.firstFinish){if(i.end)return void setTimeout(function(){t(!0)},1500);var s={page:i.page};i.$fetch("store_clerk_list",s).then(function(s){setTimeout(function(){i.page++,i.list=i.list.concat(s),10!=s.length?(setTimeout(function(){t(!0)}),i.end=!0):setTimeout(function(){t()})},1500)}).catch(function(i){setTimeout(function(){t(!0)})})}},remove:function(t,i){var s=this;s.$dialog.confirm({title:"提醒",message:"是否移除此账号？"}).then(function(){s.$fetch("store_staff_remove",{},t).then(function(t){s.$toast("账号已移除"),s.list.splice(i,1)})}).catch(function(){})},setadmin:function(t,i){var s=this;s.$dialog.confirm({title:"提醒",message:"是否修改管理员权限？"}).then(function(){s.$fetch("staff_set_admin",{},t).then(function(t){s.$toast("修改成功"),2==s.list[i].user_type?s.list[i].user_type=1:s.list[i].user_type=2})}).catch(function(){})},toStaff:function(t){this.$router.push({path:"/staff",query:{staff_id:t}})}}},a={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"staff"},[s("van-nav-bar",{attrs:{title:"员工管理","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"ul"},[s("scroller",{ref:"scroller",attrs:{"on-infinite":t.infinite}},[s("div",{staticStyle:{height:"1px"}}),t._v(" "),t._l(t.list,function(i,n){return s("div",{staticClass:"li",on:{click:function(s){t.toStaff(i.id)}}},[s("div",{staticClass:"info"},[s("div",{staticClass:"left"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:i.user_pic&&i.user_pic.length?t.uploadFileUrl+i.user_pic:t.imgs}})]),t._v(" "),s("div",{staticClass:"center"},[s("div",{staticClass:"name"},[t._v(t._s(i.staff_name)),s("span",[t._v("Lv."+t._s(i.staff_lavel))])]),t._v(" "),s("div",{staticClass:"time"},[t._v(t._s(i.staff_add_at))])])]),t._v(" "),1==i.staff_status&&1==i.staff_pass?s("div",{staticClass:"right"},[s("div",{staticClass:"btn",on:{click:function(s){s.stopPropagation(),t.setadmin(i.id,n)}}},[t._v(t._s(2==i.user_type?"撤销管理员":"设置为管理员"))]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(s){s.stopPropagation(),t.remove(i.id,n)}}},[t._v("移除本账号")])]):t._e()]),t._v(" "),1==i.staff_status&&1==i.staff_pass?s("div",{staticClass:"service_num"},[s("div",{staticClass:"all"},[s("div",{staticClass:"num"},[t._v(t._s(i.staff_all_services))]),t._v(" "),s("div",{staticClass:"title"},[t._v("全部服务")])]),t._v(" "),s("div",{staticClass:"finish"},[s("div",{staticClass:"num"},[t._v(t._s(i.staff_total_services))]),t._v(" "),s("div",{staticClass:"title"},[t._v("已完成服务")])])]):t._e()])})],2)],1)])],1)},staticRenderFns:[]};var c=s("VU/8")(e,a,!1,function(t){s("kYkH")},"data-v-6f0f36f0",null);i.default=c.exports},kYkH:function(t,i){}});