webpackJsonp([23],{"6F9F":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("P9l9"),o=s("UtaA"),n=s("M6W8"),r=s("qfJ3"),a={components:{headRi:o.a,orderState:n.a,renderAppointedRow:r.a},data:function(){return{cancel_reason:"",rishow:!1,distri:!1,cancel_x:!1,isshow:!1,fgshow:!1,list_distri:[],distri_num:null,orderState:"",indexs:"",order_sn:"",tabs:[{name:"未完成",id:99},{name:"已完成",id:0}],num:0,numlist:0,numlist2:0,inishow:!1,ids:"",list_com:[],fglist:[{name:"支付宝",imgs:s("K0f0")},{name:"微信",imgs:s("K0f0")},{name:"银行",imgs:s("K0f0")}],token:"",staff_id:0,fromStaff:0,uploadFileUrl:e.a.uploadFileUrl+"/"}},mounted:function(){this.staff_id=this.$route.query.staff_id,this.fromStaff=this.$route.query.fromStaff,this.listget(),this.token=this.$store.state.token},methods:{replaceStyle:function(t){return t.replace(/<[^<>]+>/g,"")},renderAppointedRow:function(t){this.$nextTick(function(){var i="";if(t.length>0){var s=t.shift();i='<i style="color: red;">'+s.store_director+"</i>",t.forEach(function(t,s){i+="，<i>"+t.store_director+"</i>"})}return i})},orishow:function(){this.rishow=!1},onClickRight:function(){this.rishow=!this.rishow},f_distri:function(t,i){this.distri=!0},xg_distri:function(t,i){this.distri=!0},o_distri:function(){this.distri=!1},tab_distri:function(t){this.distri_num=t},listget:function(){var t=this,i={rows:500,state:0};t.$fetch("staff_service_record",i,t.staff_id,"POST",1).then(function(i){t.list_com=i})},dad:function(t,i){this.ids=t.id,1==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:3==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:this.inishow=!1},sureOrder:function(t,i){var s=this;this.$dialog.alert({title:"提示",message:"确认要接单吗",showCancelButton:!0}).then(function(){var i=s,e={rows:500};i.$fetch("order_change_status_receipt",e,t.order_sn).then(function(t){i.listget()})}).catch(function(){})},startServer:function(t){var i=this;i.$dialog.alert({title:"提示",message:"确定要开始服务吗",showCancelButton:!0}).then(function(){var s=t.order_sn+("-"+t.order_sub_sn||"");i.$fetch("order_change_status_begin",{},s).then(function(t){i.listget()})}).catch(function(){})},completed:function(t){var i=this;i.$dialog.alert({title:"提示",message:"确认要成订单吗",showCancelButton:!0}).then(function(){var s=t.order_detail.order_sn+("-"+t.order_detail.order_sub_sn||"");i.$fetch("order_change_status_completed",{},s).then(function(t){i.listget()})}).catch(function(){})},onClickLeft:function(){this.$router.push({path:"/member"}),this.$store.commit("store_show",!1)},detailst:function(t){this.$router.push({path:"/orderDetails_x",query:{its:t,usertype:1}})},tab:function(t){var i=this;i.num=t;var s={rows:500};s.state=t,i.$fetch("staff_service_record",s,i.staff_id,"POST",1).then(function(t){i.list_com=t})},shows:function(t,i){this.isshow=!0,this.indexs=i,this.order_sn=t.order_sn},ofgshow:function(t,i){var s=this;s.listits=t,s.order_sn=t.order_sn,s.$fetch("order_sign_get",{},t.order_sn).then(function(t){s.fgshow=!0,s.order_sign=t.order_sign,s.listget()})},qdfk:function(){var t=encodeURIComponent(this.token),i=this.order_sign,s=this.order_sn;window.location.href="http://jiajie-server.7dugo.com/order.pay?order_sign="+i+"&order_sn="+s+"&token="+t},spilits:function(){var t=this;e.a.order_delete,t.order_sn;t.$fetch("order_delete",{},t.order_sn+"-store").then(function(i){t.isshow=!1,t.list_com.splice(t.indexs,1),t.listget()})},spilits_cancel:function(){var t=this,i={};i.cancel_reason=t.cancel_reason;e.a.order_cancel,t.order_sn_ok;t.$fetch("order_cancel",i,t.order_sn_ok).then(function(i){t.cancel_x=!1,t.listget()}).catch(function(i){t.cancel_x=!1})},o_cancel:function(t){this.order_sn_ok=t,this.cancel_x=!0},xbut_cancel_x:function(){},xbut_cancel:function(){this.cancel_x=!1},xbut:function(){this.isshow=!1},fgbut:function(){this.fgshow=!1},fgxuz:function(t,i){this.num=i},getTime:function(t){var i=new Date(t);return i?i.getFullYear()+"-"+this.add0(i.getMonth()+1)+"-"+this.add0(i.getDate())+" "+this.add0(i.getHours())+":"+this.add0(i.getMinutes()):""},add0:function(t){return(t=Number(t))<10&&(t="0"+t),t},getComment:function(t){this.$router.push({path:"/myeval",query:{order_comment_id:t}})}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"find"},[e("div",{staticClass:"find_top"},[t.fromStaff?e("van-nav-bar",{attrs:{title:"服务记录","left-arrow":""},on:{"click-left":t.onClickLeft}}):e("van-nav-bar",{attrs:{title:"订单管理","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.rishow,expression:"rishow"}],staticStyle:{position:"fixed","z-index":"9999",top:"0",right:"0",left:"0",bottom:"0",background:"rgba(0,0,0,0)"},on:{click:function(i){i.stopPropagation(),t.orishow()}}},[e("div",{staticStyle:{position:"absolute","z-index":"9999",top:".45rem",right:"0",width:"1rem",background:"rgba(0,0,0,.2)"}},[e("head-ri")],1)])],1),t._v(" "),e("ul",{staticClass:"top_nav_ul"},t._l(t.tabs,function(i,s){return e("li",{class:{li_style:s==t.num},on:{click:function(i){t.tab(s)}}},[e("div",{staticClass:"top_nav_img",on:{click:function(e){t.dad(i,0==s||2==s)}}},[t._v("\n\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t")])])})),t._v(" "),e("div",{staticClass:"top_nav"},[e("div",{staticClass:"commodity"},[e("ul",t._l(t.list_com,function(i,o){return e("li",{staticClass:"list_coms",class:"state_"+i.order_detail.order_status,on:{click:function(s){t.detailst(i.order_detail.order_sn)}}},[e("div",{staticClass:"com_tit"},[e("div",{staticClass:"com_tit_img"},[e("div",[t._v("\n\t\t\t\t\t\t\t\t\t订单编号："+t._s(i.order_detail.order_sn)+"\n\t\t\t\t\t\t\t\t")])]),t._v(" "),e("order-state",{attrs:{order_info:i,is_store_page:!0}})],1),t._v(" "),e("div",{staticClass:"com_com"},[e("div",{staticStyle:{position:"relative"}},[i.order_detail.is_sys_order?e("div",{staticClass:"sys",staticStyle:{position:"absolute",top:"0",right:"0",background:"#f00",color:"#fff","font-size":".12rem"}},[t._v("周期")]):t._e(),t._v(" "),e("img",{attrs:{src:i.order_detail.order_pic[0]&&i.order_detail.order_pic[0].length>0?t.uploadFileUrl+i.order_detail.order_pic[0]:"../../assets/img/logo_h.png"}})]),t._v(" "),e("div",{staticClass:"com_com_x"},[e("div",{staticClass:"com_com_x_tit",staticStyle:{"font-weight":"bold"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(i.order_detail.order_name)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"com_com_x_ov",domProps:{innerHTML:t._s(t.replaceStyle(i.order_detail.order_info))}}),t._v(" "),e("div",{staticClass:"com_com_x_ov",staticStyle:{width:"2.6rem",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(i.server_info.address_name)),"无门牌号"!=i.server_info.house_number?e("span",[t._v(t._s(i.server_info.house_number))]):t._e()]),t._v(" "),e("div",{staticClass:"com_com_x_score2"},[e("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t￥"+t._s(i.payment.order_amount)+"\n\t\t\t\t\t\t\t\t\t")])])])]),t._v(" "),e("div",{staticClass:"sj_x"},[e("div",{staticClass:"sj_x_img"},[e("img",{attrs:{src:s("KkgU")}}),t._v(" "),e("render-appointed-row",{attrs:{member:i.server_info.appointed_row}})],1),t._v(" "),e("div",{staticClass:"sj_x_sj"},[e("div",[t._v("服务时间:")]),t._v(" "),e("div",[t._v(t._s(i.time_record.contact_appointment_at))])]),t._v(" "),i.time_record.next_order_at?e("div",{staticClass:"sj_x_sj"},[e("div",[t._v("下期服务时间:")]),t._v(" "),e("div",[t._v(t._s(i.time_record.next_order_at))])]):t._e()]),t._v(" "),"PAY_SUCCESS"==i.order_detail.order_pay_state_dsc?e("div",{staticClass:"but_coms"},["PENDING_DOOR"!=i.order_detail.order_bis_state_dsc||t.fromStaff?t._e():e("div",{staticClass:"but_coms_but2",on:{click:function(s){s.stopPropagation(),t.startServer(i.order_detail)}}},[t._v("\n\t\t\t\t\t\t\t\t开始服务\n\t\t\t\t\t\t\t")]),t._v(" "),"PENDING_DOOR"!=i.order_detail.order_bis_state_dsc||t.fromStaff?"IN_SERVICE"!=i.order_detail.order_bis_state_dsc||t.fromStaff?"COMPLETED"==i.order_detail.order_bis_state_dsc?e("div",{staticClass:"but_coms_but2",on:{click:function(s){s.stopPropagation(),t.getComment(i.order_detail.order_comment_id)}}},[t._v("\n\t\t\t\t\t\t\t\t查看评价\n\t\t\t\t\t\t\t")]):t._e():e("div",{staticClass:"but_coms_but2",on:{click:function(s){s.stopPropagation(),t.completed(i,o)}}},[t._v("\n\t\t\t\t\t\t\t\t已完成\n\t\t\t\t\t\t\t")]):e("div",{staticClass:"but_coms_but1",on:{click:function(s){s.stopPropagation(),t.o_cancel(i.order_detail.order_sn)}}},[t._v("\n\t\t\t\t\t\t\t\t拒绝订单\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.distri,expression:"distri"}],staticClass:"distri_box",on:{click:function(i){return i.stopPropagation(),t.o_distri(i)}}},[e("transition",{attrs:{name:"slide-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.distri,expression:"distri"}],staticClass:"distri_biv"},[e("div",{staticClass:"distri_biv_div1"},[e("div",{staticStyle:{color:"#B2B2B2","font-size":".12rem"},on:{click:function(i){return i.stopPropagation(),t.o_distri(i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t返回\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),e("div",{staticStyle:{"font-size":".14rem"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t分配人员\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),e("div",{staticStyle:{color:"#18B4ED","font-size":".12rem"},on:{click:function(i){return i.stopPropagation(),t.o_distri(i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t确定\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"distri_biv_div2"},[e("ul",t._l(t.list_distri,function(i,s){return e("li",[e("span",{class:{distri_biv_div_span:s==t.distri_num},on:{click:function(i){i.stopPropagation(),t.tab_distri(s)}}},[t._v(t._s(i.name)+t._s(s))])])}))])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbut()}}},[e("div",{staticClass:"po_box_div"},[e("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),t.indexs?e("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t\t\t\t\t\t确定要删除此订单？\n\t\t\t\t\t\t\t\t")]):e("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t\t\t\t\t\t确定要取消此订单？\n\t\t\t\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"po_box_but"},[e("div",{on:{click:function(i){i.stopPropagation(),t.xbut()}}},[t._v("取消")]),t._v(" "),e("div",{on:{click:function(s){s.stopPropagation(),t.spilits(i,o)}}},[t._v("确认")])])])])])})),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.cancel_x,expression:"cancel_x"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbut_cancel_x()}}},[e("div",{staticClass:"po_box_div2"},[e("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),e("div",{staticStyle:{height:"1rem","border-bottom":"0.01rem solid #eee"}},[e("div",{staticStyle:{margin:".2rem .2rem 0 .2rem"}},[t._v("\n                确定要取消此订单？\n              ")]),t._v(" "),e("div",{staticStyle:{margin:".2rem"}},[t._v("\n                取消原因 : "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cancel_reason,expression:"cancel_reason"}],attrs:{type:"text"},domProps:{value:t.cancel_reason},on:{input:function(i){i.target.composing||(t.cancel_reason=i.target.value)}}})])]),t._v(" "),e("div",{staticClass:"po_box_but"},[e("div",{on:{click:function(i){i.stopPropagation(),t.xbut_cancel()}}},[t._v("取消")]),t._v(" "),e("div",{on:{click:function(i){i.stopPropagation(),t.spilits_cancel(t.its,t.index)}}},[t._v("确认")])])])])])])])},staticRenderFns:[]};var _=s("VU/8")(a,c,!1,function(t){s("YRR2"),s("Dwgi")},"data-v-03aa2cde",null);i.default=_.exports},Dwgi:function(t,i){},KkgU:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAkCAYAAADy19hsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJBMjQ0MkEzQkQ4NTExRThBQjkwQzA4RDBFMzNGRDA2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJBMjQ0MkE0QkQ4NTExRThBQjkwQzA4RDBFMzNGRDA2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkEyNDQyQTFCRDg1MTFFOEFCOTBDMDhEMEUzM0ZEMDYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkEyNDQyQTJCRDg1MTFFOEFCOTBDMDhEMEUzM0ZEMDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7HhwlzAAACtUlEQVR42tyY7XGjMBCGMZP/4So4roIoFZhUYHdgOjCuIKQCkwriVOC4gjgVhFRgUsHhDrI785LZ0UlggYwztzM78AO0j1b7BZMsywJPEpHOSBWUpYTuSGvTS+v12snIlSfQJWmGeykJrgxbkD7awE+VcCAse/KVNDfA6pvK8Ww8xODEISRmMPwsIA4doCapSG+Fp3kDNxQaO1/Ac9InATbB9VUcuavsSe/E/RQbWRH4y5CQYNAt6ZH0gfSP2EQy4GQT8X6K2P7Ftlar1VNf4ByLPSNWc3ihMTJUMlSJijRDaHzw2gSduwLzy/fNAobMnnkAnmnlrYbXP9k2QccuwJl2NZUqH6IM0HmLbSvwFDvdB+eVyNBINoLhZGAl4lWX2iOwba1P3ftDGkfpEdi21l/XpONk+91iaOcB1rgGJVsE7364AO9RKWwJ9uIB2LZGKhhOBi5E4zC1Xk6MtwGwb1hD925TTiXDScAVuk+MFhxZPHHsAXs0NR6EwjtsPXJDcU26g6gYyrKppAdsYqlAqXDMwSXpmp0WYoYwxdMCc4aLXOOdhSXMHmCzII+/w+utwDF2pxBnSnQeuaEtDPSZbWO8u5Whxl2ONBcVgq8HvUXL8TJCvCoMPGnLwB4FfoQbxx2BloaY3uAkSjxT6x7OhWfHgP12EsEpQ4tOTaccioFmifiZ2xb2DKtDR5aPB2ZaNpsKtWKdW/r79kywel4EhumtkNNbiIcXTXZayk0SnF8S8mJqaWLMtuBTCEWNtbXKdTCe3Fu83LCpUHhv31HMx5CYvDhvmeqSUOtcpqAfW9K2MbRrHp5eAHja96tZjRwO3xXDVJclcI0srLq+t8aENgxazFhfoWwUXV+0lwTGqBl1hcQlPaz6/qr6cfJfAVcX5LLabvsDv0EXjEeGLcXfn3/kS4ABABXe0B8GpmnZAAAAAElFTkSuQmCC"},YRR2:function(t,i){}});