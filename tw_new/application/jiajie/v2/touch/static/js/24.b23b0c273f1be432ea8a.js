webpackJsonp([24],{UeJ8:function(t,e){},cAuA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("P9l9"),s=i("M6W8"),r=i("oAV5"),n=i("9qR2"),a={components:{orderState:s.a,orderConfirmation:n.a},data:function(){return{end:!1,firstFinish:!1,page:1,price_type:"",wechat:!1,onshows:!0,uploadFileUrl:o.a.uploadFileUrl+"/",isshow:!1,fgshow:!1,rule:!1,indexs:"",paylist:[{name:"支付宝",type:"alipay"},{name:"微信",type:"wechat"},{name:"银行",type:"bankcard"}],tabs:[{name:"全部",id:1},{name:"待付款",id:2},{name:"待接单",id:3},{name:"待服务",id:4},{name:"待评价",id:5}],num:0,numlist:0,numlist2:0,inishow:!1,ids:"",list_com:[],order_sign:"",order_sn:"",token:"",listits:{},oits_list:{},payShow:!1,orderData:{}}},mounted:function(){this.$route.query.index?(this.num=this.$route.query.index,this.tab(this.num)):this.listget(),this.token=this.$store.state.token},methods:{call:function(t){t?window.location.href="tel:"+t:this.$toast("拨号失败！")},replaceStyle:function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<[^<>]+>/g,"")},listget:function(){var t=this;t.page=1;var e={};e.page=t.page,e.condition={"order_type <>":3},t.$fetch("ouser_get_order",e).then(function(e){t.page++,t.list_com=e,10!=e.length?(t.$refs.list_com_order.finishInfinite(!0),t.end=!0):t.$refs.list_com_order.finishInfinite(!1),t.firstFinish=!0})},pointRule:function(){this.rule=!0},closeLay:function(){this.rule=!1},dad:function(t,e){this.ids=t.id,1==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:3==t.id?1==this.inishow?this.inishow=!1:this.inishow=!this.inishow:this.inishow=!1},onClickLeft:function(){this.$router.push({path:"/member"})},detailst:function(t,e){this.$router.push({path:"/orderDetails",query:{order_snx:t.order_detail.order_sn}})},tab:function(t){var e=this,i={rows:9900};e.num=t,1==t?(i.condition={order_state:0},e.$fetch("ouser_get_order",i).then(function(t){e.list_com=t})):2==t?(i.condition={order_state:1},e.$fetch("ouser_get_order",i).then(function(t){e.list_com=t})):3==t?(i.condition={order_state:2},e.$fetch("ouser_get_order",i).then(function(t){e.list_com=t})):4==t?(i.condition={order_rate:1,order_comment_id:0,order_state:3},e.$fetch("ouser_get_order",i).then(function(t){e.list_com=t})):(i.condition={"order_type <>":3},e.$fetch("ouser_get_order",i).then(function(t){e.list_com=t}))},menvaluate:function(t,e){this.$router.push({path:"/menvaluate",query:{order_snx:t.order_detail.order_sn}})},ofgshow:function(t,e){this.orderData.order_sn=t.order_detail.order_sn,this.orderData.total=Number(t.payment.order_amount),this.orderData.order_pay_way=t.payment.order_pay_way,this.orderData.order_deductible_type=t.payment.order_deductible_type,this.payShow=!0},shows:function(t,e){this.isshow=!0,this.indexs=e,this.oits_list.order_state=t.order_detail.order_state,this.oits_list.order_sn=t.order_detail.order_sn},spilits:function(){var t=this;i("mw3O");0==t.oits_list.order_state||1==t.oits_list.order_state||2==t.oits_list.order_state?t.$fetch("user_cancel_order",{},t.oits_list.order_sn).then(function(e){t.isshow=!1,t.tab(t.num),t.$toast("取消成功")}).catch(function(e){t.isshow=!1}):t.$fetch("order_delete",{},t.oits_list.order_sn).then(function(e){t.isshow=!1,t.tab(t.num),t.$toast("删除成功")}).catch(function(e){t.isshow=!1})},xbut:function(){this.isshow=!1},fgbut:function(){this.fgshow=!1},fgxuz:function(t,e){this.num=e},qdfk:function(){if(this.onshows){var t=this.order_sign,e=this.order_sn,i=this.price_type;r.a.pay(e,t,"orderDetails","orderDetails",i),this.onshows=!1}},eval:function(){this.$dialog.alert({title:"评价说明",message:"订单如果逾期没有评价的话（默认从订单的服务开始时间算起，逾期时间为3天），平台将自动给予好评，逾期时间请参考订单的规则。"})},infinite:function(t){var e=this;if(e.firstFinish){if(e.end)return void setTimeout(function(){t(!0)},1500);e.page=1;var i={page:e.page};e.$fetch("ouser_get_order",i).then(function(i){setTimeout(function(){e.page++,e.list_com=e.list_com.concat(i),10!=i.length?(setTimeout(function(){t(!0)}),e.end=!0):setTimeout(function(){t()})},1500)}).catch(function(e){setTimeout(function(){t(!0)})})}}}},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"find"},[o("div",[o("van-nav-bar",{attrs:{title:"我的订单","left-arrow":"","right-text":"订单说明"},on:{"click-left":t.onClickLeft,"click-right":t.pointRule}})],1),t._v(" "),o("ul",{staticClass:"top_nav_ul"},t._l(t.tabs,function(e,i){return o("li",{class:{li_style:i==t.num},on:{click:function(e){t.tab(i)}}},[o("div",{staticClass:"top_nav_img",on:{click:function(o){t.dad(e,0==i||2==i)}}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])])})),t._v(" "),o("div",{staticClass:"top_nav"},[o("div",{staticClass:"commodity"},[o("scroller",{ref:"list_com_order",attrs:{"on-infinite":t.infinite}},[o("ul",t._l(t.list_com,function(e,s){return o("li",{staticClass:"list_coms",on:{click:function(i){t.detailst(e,s)}}},[o("div",{staticClass:"com_com"},[o("div",{staticStyle:{position:"relative"}},[e.order_detail.is_sys_order?o("div",{staticClass:"sys",staticStyle:{"font-size":".12rem",position:"absolute",top:"0",right:"0",background:"#f00",color:"#fff"}},[t._v("周期")]):t._e(),t._v(" "),""==e.order_detail.order_img?o("img",{attrs:{src:i("y8yI")}}):o("img",{attrs:{src:t.uploadFileUrl+e.order_detail.order_img[0]}})]),t._v(" "),o("div",{staticClass:"com_com_x"},[o("div",{staticClass:"com_com_x_tit"},[o("div",{staticClass:"left"},[t._v(t._s(e.order_detail.order_name))]),t._v(" "),o("order-state",{attrs:{order_info:e,is_store_page:!1}})],1),t._v(" "),o("div",{directives:[{name:"clampy",rawName:"v-clampy",value:3,expression:"3"}],staticClass:"com_com_x_ov",domProps:{innerHTML:t._s(t.replaceStyle(e.order_detail.order_info))}}),t._v(" "),o("div",{staticClass:"com_com_x_score2"},[o("div",[t._v("￥"+t._s(e.payment.order_amount))])])])]),t._v(" "),o("div",{staticClass:"item_sj"},[o("div",[o("div",[t._v("下单时间 :")]),t._v(" "),o("div",[t._v(t._s(e.time_record.add_time))])]),t._v(" "),o("div",[o("div",[t._v("服务时间 :")]),t._v(" "),o("div",[t._v(t._s(e.time_record.contact_appointment_at))])]),t._v(" "),o("div",[o("div",{staticStyle:{width:"1rem"}},[t._v("联系地址 :")]),t._v(" "),o("div",[t._v(t._s(e.server_info.address_name)+t._s(e.server_info.house_number))])]),t._v(" "),e.time_record.next_order_at?o("div",[o("div",[t._v("下期服务时间 :")]),t._v(" "),o("div",[t._v(t._s(e.time_record.next_order_at))])]):t._e()]),t._v(" "),o("div",{staticClass:"but_coms",staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center"}},[0==e.order_detail.order_pay_state_dsc&&0==e.order_detail.order_state||1==e.order_detail.order_state||2==e.order_detail.order_state&&0==e.order_detail.order_rate?o("div",{staticClass:"but_coms_but1",on:{click:function(i){i.stopPropagation(),t.shows(e,s)}}},[t._v("取消订单\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),4!=e.order_detail.order_type?["PENDING_PAY"==e.order_detail.order_pay_state_dsc?o("div",{staticClass:"but_coms_but3",on:{click:function(i){i.stopPropagation(),t.ofgshow(e,s)}}},[t._v("去支付\n\t\t\t\t\t\t\t\t\t")]):t._e()]:t._e(),t._v(" "),"PAY_SUCCESS"==e.order_detail.order_pay_state_dsc?["SET_UP"!=e.order_detail.order_bis_state_dsc?o("div",{staticClass:"but_coms_but4",on:{click:function(i){i.stopPropagation(),t.call(e.store_info.store_phone)}}},[t._v("联系商家")]):t._e()]:t._e(),t._v(" "),"PENDING_EVALUATE"==e.order_detail.order_bis_state_dsc?[o("div",{staticClass:"but_coms_but2",on:{click:function(i){i.stopPropagation(),t.menvaluate(e,s)}}},[t._v("评价")])]:0==e.order_detail.order_is_peddling&&4==e.order_detail.order_state||1==e.order_detail.order_rate||-1==e.order_detail.order_rate||5==e.order_detail.order_state?o("div",{staticClass:"but_coms_but1",on:{click:function(i){i.stopPropagation(),t.shows(e,s)}}},[t._v("\n\t\t\t\t\t\t\t\t\t删除订单\n\t\t\t\t\t\t\t\t")]):t._e()],2)])}))]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"po_box",on:{click:function(e){return e.stopPropagation(),t.xbut(e)}}},[o("div",{staticClass:"po_box_div"},[o("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),0==t.oits_list.order_state||1==t.oits_list.order_state||5==t.oits_list.order_state||4==t.oits_list.order_state?o("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t\t\t\t确定要删除此订单？\n\t\t\t\t\t\t")]):0==t.oits_list.order_state||1==t.oits_list.order_state||2==t.oits_list.order_state?o("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t\t\t\t确定要取消此订单？\n\t\t\t\t\t\t")]):t._e(),t._v(" "),o("div",{staticClass:"po_box_but"},[o("div",{on:{click:function(e){return e.stopPropagation(),t.xbut(e)}}},[t._v("取消")]),t._v(" "),o("div",{on:{click:function(e){return e.stopPropagation(),t.spilits(e)}}},[t._v("确认")])])])])],1)]),t._v(" "),o("van-popup",{staticClass:"ruleBox",attrs:{position:"right"},model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},[o("van-nav-bar",{attrs:{title:"订单说明","left-arrow":""},on:{"click-left":t.closeLay}}),t._v(" "),o("p",[t._v("1.您发布的需求，在您指定的预约时间，如果仍然没有人接单（通常是因为价格过低），帮家洁平台将会自动将您的需求取消，如果您想使需求继续生效，可以通过修改，调整预约时间来使需求重新生效。")]),t._v(" "),o("p",[t._v("2.您购买的产品，从产品的购买时间算起，逾期15天，如果您在15天内，没有操作确认收货的话，平台将自动确认为您已收货，并更新订单状态为已完成，请您务必及时关注您的订单。")]),t._v(" "),o("p",[t._v("3.您购买的服务，从服务的开始时间算起，逾期3天，如果您在3天内，没有操作确认服务完成的话，平台将自动确认更新订单状态为服务完成，并请您务必及时关注您的订单。")])],1),t._v(" "),o("orderConfirmation",{attrs:{orderData:t.orderData,orderType:4},model:{value:t.payShow,callback:function(e){t.payShow=e},expression:"payShow"}})],1)},staticRenderFns:[]};var d=i("VU/8")(a,_,!1,function(t){i("UeJ8"),i("tkEL")},"data-v-8e10c31c",null);e.default=d.exports},tkEL:function(t,e){}});