webpackJsonp([48],{ll0E:function(i,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=o("bOdI"),_=o.n(e),a=o("P9l9"),r=o("M6W8"),n=(o("oAV5"),o("9qR2")),d={components:{orderState:r.a,orderConfirmation:n.a},data:function(){var t;return t={payShow:!1,orderData:{},addshow:!1,isshow:!1,isshow_qx:!1,indexs:"",num:"",uploadFileUrl:a.a.uploadFileUrl+"/",fgshow:!1,list_com:{listname:"",payment:"",type:"",name:"",xiangq:"",p_score:"",xis:"",price:"",price_y:""},addslists:{}},_()(t,"list_com",{}),_()(t,"addnema",""),_()(t,"addtel",""),_()(t,"addaddres",""),_()(t,"lng",0),_()(t,"lat",0),_()(t,"order_sign",""),_()(t,"order_sn",""),_()(t,"token",""),_()(t,"fgshow",!1),_()(t,"oits_list",{}),t},mounted:function(){this.order_getby(),this.token=this.$store.state.token},methods:{call:function(t){t.order.store_info.store_phone?window.location.href="tel:"+t.order.store_info.store_phone:this.$toast("拨号失败！")},menvaluate:function(t,i){this.$router.push({path:"/menvaluate",query:{order_snx:t.order_table_sn}})},replaceStyle:function(t){return t.replace(/<[^<>]+>/g,"")},addsadd:function(){this.addshow=!0},order_getby:function(){var t=this;t.$fetch("order_getby_sn",{},t.$route.query.order_sn).then(function(i){t.addslists=i})},indexadd:function(t,i){},olist:function(){var t=this.$route.query.its;this.list_com.listname=t.listname,this.list_com.name=t.name,this.list_com.p_score=t.p_score,this.list_com.payment=t.payment,this.list_com.price=t.price,this.list_com.price_y=t.price_y,this.list_com.type=t.type,this.list_com.xiangq=t.xiangq,this.list_com.xis=t.xis},onClickLeft:function(){this.payShow=!1},onClickLeft2:function(){this.$router.back(-1)},shows_qx:function(t){this.isshow_qx=!0,this.oits_list=t},shows:function(t){alert("ss");this.isshow=!0,this.oits_list=t},spilits:function(){var t=this;t.oits_list.order_detail,t.$fetch("user_cancel_order",{},t.oits_list.order_detail.order_sn).then(function(i){t.$toast("取消成功"),t.isshow=!1,setTimeout(function(){t.order_getby()},2e3)})},spilitsx:function(){var i=this;i.oits_list.order_detail,i.$fetch("order_delete",{},i.oits_list.order_detail.order_sn).then(function(s){i.$toast("删除成功"),t=setTimeout(function(){i.$router.back(-1)},2e3)})},xbut:function(){this.isshow=!1,this.isshow_qx=!1},ofgshow:function(t,i){this.orderData.order_sn=t.order_table_sn,this.orderData.total=Number(t.demand_remuneration),this.orderData.successUrl="myfb",this.orderData.order_pay_way=t.demand_price_type,this.orderData.order_deductible_type=t.order.payment.order_deductible_type,this.payShow=!0},fgbut:function(){this.fgshow=!1},fgxuz:function(t,i){this.num=i},opadd:function(){this.addshow=!1}}},c={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"orderd"},[1==t.payShow?s("div",[s("van-nav-bar",{attrs:{title:"支付","left-arrow":""},on:{"click-left":t.onClickLeft}})],1):s("div",[s("van-nav-bar",{attrs:{title:"订单详情","left-arrow":""},on:{"click-left":t.onClickLeft2}})],1),t._v(" "),s("div",{staticClass:"box"},t._l(t.addslists,function(i){return s("div",[i.server_info?s("div",{staticClass:"adds"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"addsri"},[s("div",{staticClass:"lrm"},[s("div",[t._v("\n\t\t\t\t\t\t\t联系人："+t._s(i.server_info.contact_name)+"\n\t\t\t\t\t\t")]),t._v(" "),s("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(i.server_info.telephone)+"\n\t\t\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"addcor"},[t._v("\n\t\t\t\t\t\t联系地址："+t._s(i.server_info.address_name)+"\n\t\t\t\t\t")])])]):t._e(),t._v(" "),i.server_info?s("div",{staticClass:"com_box"},[s("ul",[s("li",{staticClass:"list_coms"},[s("div",{staticClass:"com_com"},[s("div",[""==i.order_detail.order_pic?s("img",{attrs:{src:o("y8yI")}}):s("img",{attrs:{src:t.uploadFileUrl+i.order_detail.order_pic[0]}})]),t._v(" "),s("div",{staticClass:"com_com_x"},[s("div",{staticClass:"com_com_x_tit"},[s("div",[t._v(t._s(i.order_detail.cat_name))]),t._v(" "),s("div",[s("order-state",{attrs:{order_info:i.server_info,is_store_page:!0}})],1)]),t._v(" "),s("div",{staticClass:"com_com_x_ov"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(i.order_detail.order_name)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"com_com_x_score2"},[s("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t￥"+t._s(i.payment.order_actual_amount)+"\n\t\t\t\t\t\t\t\t\t")])])])])])])]):t._e(),t._v(" "),i.server_info?s("div",{staticClass:"oredrs"},[s("ul",[s("li",[s("div",[t._v("订单编号")]),t._v(" "),s("div",[t._v(t._s(i.order_detail.order_sn))])]),t._v(" "),s("li",[s("div",[t._v("支出")]),t._v(" "),s("div",{staticStyle:{color:"#f00"}},[t._v(t._s(i.payment.order_actual_amount))])]),t._v(" "),s("li",[s("div",[t._v("支付方式")]),t._v(" "),0==i.payment.order_actual_amount?s("div",[1==i.payment.order_deductible_type?s("span",[t._v("余额")]):2==i.payment.order_deductible_type?s("span",[t._v("积分")]):t._e(),t._v(" 抵扣\n\t\t\t\t\t\t")]):s("div",["alipay"==i.payment.order_pay_way?s("div",[t._v("支付宝")]):"wechat"==i.payment.order_pay_way?s("div",[t._v("微信")]):s("div",[t._v("银行卡")])])]),t._v(" "),s("li",[s("div",[t._v("下单时间")]),t._v(" "),s("div",[t._v(t._s(i.time_record.contact_appointment_at))])])])]):t._e(),t._v(" "),i.order_detail?s("div",{staticClass:"but_coms"},["PAY_SUCCESS"==i.order_detail.order_pay_state_dsc?["PENDING_EVALUATE"==i.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but3",on:{click:function(s){s.stopPropagation(),t.menvaluate(i,t.index)}}},[t._v("立即评价")]):t._e(),t._v(" "),i.order_detail.order_bis_state_dsc.indexOf(["SET_UP","PENDING_PAY","PENDING_ORDER","PENDING_ASSIGN","PENDING_DOOR"])?s("div",{staticClass:"but_coms_but1",on:{click:function(s){s.stopPropagation(),t.shows(i)}}},[t._v("取消订单")]):t._e()]:["PENDING_PAY"==i.order_detail.order_pay_state_dsc?s("div",{staticClass:"but_coms_but3",on:{click:function(s){s.stopPropagation(),t.ofgshow(i,t.index)}}},[t._v("去支付")]):t._e()],t._v(" "),"PENDING_ASSIGN"==i.order_detail.order_bis_state_dsc||"PENDING_DOOR"==i.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but4",on:{click:function(s){s.stopPropagation(),t.call(i)}}},[t._v("联系商家")]):"COMPLETED"==i.order_detail.order_bis_state_dsc||"CLOSED"==i.order_detail.order_bis_state_dsc?s("div",{staticClass:"but_coms_but1",on:{click:function(s){s.stopPropagation(),t.shows_qx(i)}}},[t._v("删除订单")]):t._e()],2):t._e()])})),t._v(" "),s("orderConfirmation",{attrs:{orderData:t.orderData,orderType:4},model:{value:t.payShow,callback:function(i){t.payShow=i},expression:"payShow"}}),t._v(" "),t.oits_list.order_detail?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow_qx,expression:"isshow_qx"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbut()}}},[s("div",{staticClass:"po_box_div"},[s("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t确定要删除此订单？\n\t\t\t")]),t._v(" "),s("div",{staticClass:"po_box_but"},[s("div",{on:{click:function(i){i.stopPropagation(),t.xbut()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(i){i.stopPropagation(),t.spilitsx()}}},[t._v("确认")])])])]):t._e(),t._v(" "),t.oits_list.order_detail?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"po_box",on:{click:function(i){i.stopPropagation(),t.xbutx()}}},[s("div",{staticClass:"po_box_div"},[s("div",{staticClass:"po_box_div_tit"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"po_box_div_com"},[t._v("\n\t\t\t\t确定要取消此订单？\n\t\t\t")]),t._v(" "),s("div",{staticClass:"po_box_but"},[s("div",{on:{click:function(i){i.stopPropagation(),t.xbut()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(i){i.stopPropagation(),t.spilits()}}},[t._v("确认")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("img",{attrs:{src:o("Li64")}})])}]};var l=o("VU/8")(d,c,!1,function(t){o("sbGJ")},"data-v-7b6b8777",null);s.default=l.exports},sbGJ:function(t,i){}});